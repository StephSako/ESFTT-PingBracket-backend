(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+kNy":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var c=n("AytR"),i=n("fXoL"),a=n("tk/3");class o{constructor(t){this.http=t,this.baseURL=c.a.endpointNodeApi+"bracket/"}getBracket(t,e){return this.http.get(`${this.baseURL}${t}/${e}`)}edit(t,e,n,c,i,a){return this.http.put(`${this.baseURL}edit/${t}/${a}/${e}/${n}`,{winnerId:c,looserId:i})}generateBracket(t,e,n,c,i){return this.http.put(`${this.baseURL}generate/${t}/${n}`,{format:e,poules:c,maxNumberPlayers:i})}deleteBracket(t){return this.http.delete(`${this.baseURL}delete/${t}`)}}o.\u0275fac=function(t){return new(t||o)(i.oc(a.b))},o.\u0275prov=i.ac({token:o,factory:o.\u0275fac,providedIn:"root"})},0:function(t,e,n){t.exports=n("zUnb")},"2PTZ":function(t,e,n){"use strict";n.r(e),n.d(e,"FormulaireModules",function(){return rt});var c=n("tyNb"),i=n("ofXK"),a=n("3Pt+"),o=n("mrSG"),r=n("FtGj"),s=n("+0xr"),l=n("r0S9"),u=n("fXoL"),d=n("FvVH"),b=n("P1pb"),p=n("FQHi"),h=n("CMva"),g=n("dNgK"),f=n("LRnZ"),m=n("Tl80"),_=n("OG8z"),k=n("jhN1"),C=n("0IaG"),P=n("Wp6s"),x=n("XiUz"),y=n("kmnG"),v=n("qFsG"),w=n("d3UM"),S=n("bTqV"),O=n("NFeN"),j=n("A5z7"),M=n("FKr1"),U=n("1jcm"),L=n("Xa2L"),I=n("5/kC");function D(t,e){1&t&&(u.kc(0,"mat-card"),u.kc(1,"h1",2),u.Wc(2,"Les inscriptions au tournoi sont ferm\xe9es ..."),u.jc(),u.jc())}function A(t,e){if(1&t&&(u.kc(0,"span"),u.Wc(1),u.jc()),2&t){const t=u.wc().$implicit;u.Sb(1),u.Yc("-",t.age_minimum," ans")}}function W(t,e){if(1&t&&(u.kc(0,"mat-option",36),u.kc(1,"span"),u.Wc(2),u.xc(3,"titlecase"),u.Uc(4,A,2,1,"span",1),u.jc(),u.jc()),2&t){const t=e.$implicit,n=u.wc().$implicit,c=u.wc(2);u.Cc("disabled",c.clickable(t,n.age))("value",t),u.Sb(2),u.Yc("",u.yc(3,4,t.nom)," "),u.Sb(2),u.Cc("ngIf",null!==t.age_minimum)}}function B(t,e){if(1&t){const t=u.lc();u.kc(0,"div"),u.kc(1,"form"),u.kc(2,"div",8),u.kc(3,"div",9),u.kc(4,"mat-form-field",10),u.kc(5,"mat-label"),u.Wc(6,"NOM Pr\xe9nom *"),u.jc(),u.kc(7,"input",11),u.sc("ngModelChange",function(n){u.Kc(t);return e.$implicit.nom=n}),u.jc(),u.jc(),u.jc(),u.kc(8,"div",12),u.kc(9,"mat-form-field",10),u.kc(10,"mat-label"),u.Wc(11,"Classement mensuel"),u.jc(),u.kc(12,"input",13),u.sc("ngModelChange",function(n){u.Kc(t);return e.$implicit.classement=n}),u.jc(),u.jc(),u.jc(),u.kc(13,"div",12),u.kc(14,"mat-form-field",10),u.kc(15,"mat-label"),u.Wc(16,"\xc2ge"),u.jc(),u.kc(17,"input",34),u.sc("input",function(){u.Kc(t);const n=e.$implicit;return u.wc(2).typing(n)})("ngModelChange",function(n){u.Kc(t);return e.$implicit.age=n}),u.jc(),u.jc(),u.jc(),u.kc(18,"div",15),u.kc(19,"mat-form-field",10),u.kc(20,"mat-label"),u.Wc(21,"Tableaux *"),u.jc(),u.kc(22,"mat-select",16),u.sc("ngModelChange",function(n){u.Kc(t);return e.$implicit.tableaux=n}),u.Uc(23,W,5,6,"mat-option",17),u.jc(),u.jc(),u.jc(),u.kc(24,"div",12),u.kc(25,"button",35),u.sc("click",function(){u.Kc(t);const n=e.$implicit;return u.wc(2).removeItem(n)}),u.Wc(26,"Effacer ce joueur"),u.jc(),u.jc(),u.jc(),u.jc(),u.jc()}if(2&t){const t=e.$implicit,n=u.wc(2);u.Sb(7),u.Cc("ngModel",t.nom),u.Sb(5),u.Cc("ngModel",t.classement),u.Sb(5),u.Cc("ngModel",t.age),u.Sb(5),u.Cc("ngModel",t.tableaux),u.Sb(1),u.Cc("ngForOf",n.tableaux)}}function $(t,e){if(1&t&&(u.kc(0,"span"),u.Wc(1),u.jc()),2&t){const t=u.wc().$implicit;u.Sb(1),u.Yc("-",t.age_minimum," ans")}}function T(t,e){if(1&t&&(u.kc(0,"mat-option",36),u.kc(1,"span"),u.Wc(2),u.xc(3,"titlecase"),u.Uc(4,$,2,1,"span",1),u.jc(),u.jc()),2&t){const t=e.$implicit,n=u.wc(2);u.Cc("disabled",n.clickable(t,n.joueurData.age))("value",t),u.Sb(2),u.Yc("",u.yc(3,4,t.nom)," "),u.Sb(2),u.Cc("ngIf",null!==t.age_minimum)}}function F(t,e){1&t&&(u.kc(0,"th",44),u.Wc(1,"Nom"),u.jc())}function R(t,e){if(1&t&&(u.kc(0,"td",45),u.Wc(1),u.jc()),2&t){const t=e.$implicit;u.Sb(1),u.Yc(" ",t.nom," ")}}function K(t,e){1&t&&(u.kc(0,"th",44),u.Wc(1,"Buffet"),u.jc())}function z(t,e){if(1&t&&(u.kc(0,"td",45),u.kc(1,"mat-slide-toggle",46),u.sc("change",function(){const t=e.$implicit;return t.buffet=!t.buffet}),u.jc(),u.jc()),2&t){const t=e.$implicit;u.Sb(1),u.Cc("checked",t.buffet)}}function H(t,e){1&t&&u.fc(0,"tr",47)}function N(t,e){1&t&&u.fc(0,"tr",48)}const J=function(){return["nom","buffet"]};function Y(t,e){if(1&t&&(u.kc(0,"div"),u.fc(1,"br"),u.kc(2,"h3",6),u.Wc(3,"Participation des joueurs au buffet"),u.jc(),u.kc(4,"table",37),u.ic(5,38),u.Uc(6,F,2,0,"th",39),u.Uc(7,R,2,1,"td",40),u.hc(),u.ic(8,41),u.Uc(9,K,2,0,"th",39),u.Uc(10,z,2,1,"td",40),u.hc(),u.Uc(11,H,1,0,"tr",42),u.Uc(12,N,1,0,"tr",43),u.jc(),u.jc()),2&t){const t=u.wc(2);u.Sb(4),u.Cc("dataSource",t.dataSource),u.Sb(7),u.Cc("matHeaderRowDef",u.Dc(3,J)),u.Sb(1),u.Cc("matRowDefColumns",u.Dc(4,J))}}function E(t,e){1&t&&(u.kc(0,"mat-icon",51),u.Wc(1,"cancel"),u.jc())}function X(t,e){if(1&t){const t=u.lc();u.kc(0,"mat-chip",49),u.sc("removed",function(){u.Kc(t);const n=e.$implicit;return u.wc(2).remove(n)}),u.Wc(1),u.Uc(2,E,2,0,"mat-icon",50),u.jc()}if(2&t){const t=e.$implicit,n=u.wc(2);u.Cc("selectable",n.selectable)("removable",n.removable),u.Sb(1),u.Yc(" ",t," "),u.Sb(1),u.Cc("ngIf",n.removable)}}function G(t,e){if(1&t&&(u.kc(0,"mat-chip",53),u.Wc(1),u.jc()),2&t){const t=e.$implicit;u.Sb(1),u.Xc(t)}}function q(t,e){if(1&t&&(u.kc(0,"mat-chip-list"),u.Uc(1,G,2,1,"mat-chip",52),u.jc()),2&t){const t=u.wc(2);u.Sb(1),u.Cc("ngForOf",t.platsAlreadyCooked)}}function V(t,e){1&t&&(u.kc(0,"p"),u.Wc(1,"(Aucun)"),u.jc())}function Z(t,e){1&t&&(u.kc(0,"p",54),u.Wc(1,"Un joueur est en cours d'inscription et n'a pas \xe9t\xe9 valid\xe9."),u.fc(2,"br"),u.kc(3,"i"),u.Wc(4,"(Rappel : cliquez sur le bouton bleu "),u.kc(5,"b"),u.Wc(6,"Valider le joueur"),u.jc(),u.Wc(7," pour inscrire chaque participant.)"),u.jc(),u.jc())}function Q(t,e){1&t&&(u.kc(0,"mat-icon"),u.fc(1,"mat-spinner",55),u.jc()),2&t&&(u.Sb(1),u.Cc("diameter",20))}function tt(t,e){if(1&t){const t=u.lc();u.kc(0,"mat-card"),u.fc(1,"p",3),u.kc(2,"h2",4),u.Wc(3),u.xc(4,"date"),u.jc(),u.fc(5,"p",5),u.xc(6,"noSanitize"),u.fc(7,"br"),u.kc(8,"h2",6),u.Wc(9,"1. Inscription aux tableaux"),u.jc(),u.fc(10,"div",5),u.xc(11,"noSanitize"),u.Uc(12,B,27,5,"div",7),u.kc(13,"form"),u.kc(14,"div",8),u.kc(15,"div",9),u.kc(16,"mat-form-field",10),u.kc(17,"mat-label"),u.Wc(18,"NOM Pr\xe9nom *"),u.jc(),u.kc(19,"input",11),u.sc("ngModelChange",function(e){u.Kc(t);return u.wc().joueurData.nom=e}),u.jc(),u.jc(),u.jc(),u.kc(20,"div",12),u.kc(21,"mat-form-field",10),u.kc(22,"mat-label"),u.Wc(23,"Classement"),u.jc(),u.kc(24,"input",13),u.sc("ngModelChange",function(e){u.Kc(t);return u.wc().joueurData.classement=e}),u.jc(),u.jc(),u.jc(),u.kc(25,"div",12),u.kc(26,"mat-form-field",10),u.kc(27,"mat-label"),u.Wc(28,"\xc2ge"),u.jc(),u.kc(29,"input",14),u.sc("input",function(){u.Kc(t);const e=u.wc();return e.typing(e.joueurData)})("ngModelChange",function(e){u.Kc(t);return u.wc().joueurData.age=e}),u.jc(),u.jc(),u.jc(),u.kc(30,"div",15),u.kc(31,"mat-form-field",10),u.kc(32,"mat-label"),u.Wc(33,"Tableaux *"),u.jc(),u.kc(34,"mat-select",16),u.sc("ngModelChange",function(e){u.Kc(t);return u.wc().joueurData.tableaux=e}),u.Uc(35,T,5,6,"mat-option",17),u.jc(),u.jc(),u.jc(),u.kc(36,"div",12),u.kc(37,"button",18),u.sc("click",function(){u.Kc(t);const e=u.wc();return e.addJoueur(e.joueurData)}),u.Wc(38,"Valider ce joueur"),u.jc(),u.jc(),u.jc(),u.jc(),u.fc(39,"br"),u.fc(40,"br"),u.kc(41,"h2",6),u.Wc(42,"2. Participation au buffet du soir"),u.jc(),u.fc(43,"p",5),u.xc(44,"noSanitize"),u.kc(45,"div",19),u.kc(46,"h3",6),u.Wc(47,"Nombre d'enfants au total"),u.jc(),u.kc(48,"mat-form-field",20),u.kc(49,"input",21),u.sc("ngModelChange",function(e){u.Kc(t);return u.wc().buffet.enfant=e}),u.jc(),u.jc(),u.jc(),u.kc(50,"div",19),u.kc(51,"h3",6),u.Wc(52,"Nombre d'ados/adultes au total"),u.jc(),u.kc(53,"mat-form-field",20),u.kc(54,"input",22),u.sc("ngModelChange",function(e){u.Kc(t);return u.wc().buffet.ado_adulte=e}),u.jc(),u.jc(),u.jc(),u.Uc(55,Y,13,5,"div",1),u.fc(56,"br"),u.kc(57,"h3",6),u.Wc(58,"Plat(s) confectionn\xe9(s)"),u.jc(),u.kc(59,"p",23),u.kc(60,"mat-icon",24),u.Wc(61,"info"),u.jc(),u.kc(62,"i"),u.Wc(63," \xc9criver un plat, puis appuyez sur la touche "),u.kc(64,"strong"),u.Wc(65,"Entr\xe9e"),u.jc(),u.Wc(66," de votre clavier pour l'ajouter \xe0 la liste, et ainsi de suite pour chaque plat."),u.jc(),u.jc(),u.kc(67,"mat-form-field",25),u.kc(68,"mat-chip-list",26,27),u.Uc(70,X,3,4,"mat-chip",28),u.kc(71,"input",29),u.sc("matChipInputTokenEnd",function(e){u.Kc(t);return u.wc().add(e)}),u.jc(),u.jc(),u.jc(),u.fc(72,"br"),u.kc(73,"p"),u.kc(74,"i"),u.Wc(75,"Plats d\xe9j\xe0 pr\xe9par\xe9s :"),u.jc(),u.jc(),u.Uc(76,q,2,1,"mat-chip-list",30),u.Uc(77,V,2,0,"ng-template",null,31,u.Vc),u.fc(79,"br"),u.fc(80,"br"),u.kc(81,"h2",6),u.Wc(82,"3. Validez le formulaire !"),u.jc(),u.Uc(83,Z,8,0,"p",32),u.kc(84,"button",33),u.sc("click",function(){u.Kc(t);return u.wc().openConfirmModale()}),u.Uc(85,Q,2,1,"mat-icon",1),u.Wc(86," Envoyer ! "),u.jc(),u.fc(87,"br"),u.fc(88,"br"),u.fc(89,"div",5),u.xc(90,"noSanitize"),u.fc(91,"br"),u.jc()}if(2&t){const t=u.Hc(69),e=u.Hc(78),n=u.wc();u.Sb(1),u.Cc("innerHTML",n.parametres.titre,u.Lc),u.Sb(2),u.Xc(u.zc(4,25,n.parametres.date,"dd/MM/yyyy")),u.Sb(2),u.Cc("innerHTML",u.yc(6,28,n.parametres.texte_debut),u.Lc),u.Sb(5),u.Cc("innerHTML",u.yc(11,30,n.parametres.consignes_tableaux),u.Lc),u.Sb(2),u.Cc("ngForOf",n.listeJoueurs),u.Sb(7),u.Cc("ngModel",n.joueurData.nom),u.Sb(5),u.Cc("ngModel",n.joueurData.classement),u.Sb(5),u.Cc("ngModel",n.joueurData.age),u.Sb(5),u.Cc("ngModel",n.joueurData.tableaux),u.Sb(1),u.Cc("ngForOf",n.tableaux),u.Sb(2),u.Cc("disabled",n.disabledAddPlayer(n.joueurData)),u.Sb(6),u.Cc("innerHTML",u.yc(44,32,n.parametres.texte_buffet),u.Lc),u.Sb(6),u.Cc("ngModel",n.buffet.enfant),u.Sb(5),u.Cc("ngModel",n.buffet.ado_adulte),u.Sb(1),u.Cc("ngIf",n.listeJoueurs.length),u.Sb(15),u.Cc("ngForOf",n.buffet.plats),u.Sb(1),u.Cc("matChipInputFor",t)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes)("matChipInputAddOnBlur",n.addOnBlur),u.Sb(5),u.Cc("ngIf",!n.platsAlreadyCookedEmpty())("ngIfElse",e),u.Sb(7),u.Cc("ngIf",n.isPlayerSubscribing()),u.Sb(1),u.Cc("disabled",n.disabledSubmit()),u.Sb(1),u.Cc("ngIf",n.spinnerShown),u.Sb(4),u.Cc("innerHTML",u.yc(90,34,n.parametres.texte_fin),u.Lc)}}class et{constructor(t,e,n,c,i,a,o,l,u,d,b,p){this.tableauService=t,this.parametreService=e,this.joueurService=n,this.buffetService=c,this.router=i,this.snackBar=a,this.logsService=o,this.notifyService=l,this.pouleService=u,this.titleService=d,this.datepipe=b,this.dialog=p,this.spinnerShown=!1,this.parametres={texte_debut:null,_id:null,date:null,titre:null,texte_buffet:null,texte_fin:null,consignes_tableaux:null,open:null},this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[r.g,r.c],this.buffet={ado_adulte:0,enfant:0,_id:null,plats:[]},this.platsAlreadyCooked=[],this.joueurData={tableaux:[],classement:null,nom:null,buffet:!0,age:null,_id:null,pointage:!1},this.listeJoueurs=[],this.dataSource=new s.k([])}ngOnInit(){this.getParametres(),this.titleService.setTitle("Tournoi ESFTT - Formulaire")}getTableaux(){this.tableauService.getAllTableaux().subscribe(t=>this.tableaux=t.filter(t=>0===t.is_launched),t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}getParametres(){this.parametreService.getParametres().subscribe(t=>{this.parametres=t,this.parametres.open&&(this.getTableaux(),this.getPlatsAlreadyCooked())},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}getPlatsAlreadyCooked(){this.buffetService.platsAlreadyCooked().subscribe(t=>this.platsAlreadyCooked=t,t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}add(t){const e=t.input,n=t.value;(n||"").trim()&&this.buffet.plats.push(n.trim()),e&&(e.value="")}remove(t){const e=this.buffet.plats.indexOf(t);e>=0&&this.buffet.plats.splice(e,1)}addJoueur(t){this.joueurData={tableaux:[],classement:null,nom:null,buffet:!0,age:null,_id:null,pointage:!1},this.listeJoueurs.push(t),this.dataSource.data=this.listeJoueurs}removeItem(t){this.listeJoueurs.splice(this.listeJoueurs.indexOf(t),1)}submit(){return Object(o.a)(this,void 0,void 0,function*(){this.spinnerShown=!0;const t=[],e=[];if(e.push(this.buffetService.register(this.buffet)),this.listeJoueurs.length>0){this.listeJoueurs.forEach(t=>{e.push(this.joueurService.create(t.tableaux,t))});const t=[...new Set(this.listeJoueurs.map(t=>t.tableaux.filter(t=>t.poules&&"simple"===t.format&&0===t.is_launched)).reduce((t,e)=>t.concat(e),[]))];t.length>0&&t.forEach(t=>e.push(this.pouleService.generatePoules(t)))}const n=this.getSubmitSummary();e.push(this.logsService.addLogs(n));for(const c of e)yield c.toPromise().then().catch(e=>t.push(e.error));this.spinnerShown=!1,t.length>0?this.notifyService.notifyUser(t.join(" - "),this.snackBar,"error","OK"):this.router.navigate(["submitted"],{state:{summary:this.getSubmitSummary()}})})}getSubmitSummary(){let t="<p><i>Inscription le "+this.datepipe.transform(new Date,"dd/MM/yyyy \xe0 HH:mm")+"</i><br>";return t+='<h3 style="margin-bottom: 2px;"><b><u>Buffet :</u></b></h3><b>Nombre d\'enfants :</b> '+this.buffet.enfant+"<br><b>Nombre d'ados/adultes :</b> "+this.buffet.ado_adulte+"<br><b>Plats pr\xe9par\xe9s :</b> "+(this.buffet.plats.length>0?this.buffet.plats.join(", "):"<i>Aucun</i>")+'<br><br><h3 style="margin-bottom: 2px;"><b><u>Inscription des joueurs :</u></b></h3>',this.listeJoueurs.length>0?this.listeJoueurs.forEach(e=>{t+='<b style="color: #3f51b5">'+e.nom.toUpperCase()+"</b><br><b>Classement :</b> "+(e.classement||e.classement>0?e.classement:"/")+"<br><b>\xc2ge :</b> "+(e.age?+e.age+" ans":"/")+"<br><b>Tableaux :</b> "+e.tableaux.map(t=>'<span style="text-transform: capitalize">'+t.nom+"</span>").join(", ")+"<br><b>Buffet :</b> "+(e.buffet?"Oui":"Non")+"<br><br>"}):t+="<i>Aucun joueur inscrit</i>",t+"</p>"}disabledAddPlayer(t){return!(null!==t.nom&&""!==t.nom&&t.tableaux.length>0)}disabledSubmit(){return 0===this.listeJoueurs.length&&0===this.buffet.enfant&&0===this.buffet.ado_adulte&&0===this.buffet.plats.length||this.spinnerShown||this.isPlayerSubscribing()}platsAlreadyCookedEmpty(){return!!this.platsAlreadyCooked&&0===this.platsAlreadyCooked.length}clickable(t,e){return null!==t.age_minimum&&(null===e||e>=t.age_minimum)}typing(t){t.tableaux=t.tableaux.filter(e=>!(t.age<=e.age_minimum&&null!==e.age_minimum))}isPlayerSubscribing(){return!(null===this.joueurData.age&&(null===this.joueurData.nom||""===this.joueurData.nom)&&0===this.joueurData.tableaux.length&&null===this.joueurData.classement)}openConfirmModale(){console.log(this.getSubmitSummary());const t={id:"confirm",action:"V\xe9rifiez les informations",text:this.getSubmitSummary(),action_button_text:"Confirmer",h1_class:"form_modale",close_button:"Modifier"};this.dialog.open(l.a,{width:"auto",data:t}).afterClosed().subscribe(t=>{t&&this.submit().then()},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}}et.\u0275fac=function(t){return new(t||et)(u.ec(d.a),u.ec(b.a),u.ec(p.a),u.ec(h.a),u.ec(c.c),u.ec(g.a),u.ec(f.a),u.ec(m.a),u.ec(_.a),u.ec(k.c),u.ec(i.e),u.ec(C.b))},et.\u0275cmp=u.Yb({type:et,selectors:[["app-formulaire"]],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],[1,"lobster","center"],[1,"center",3,"innerHTML"],[1,"center","lobster"],[3,"innerHTML"],[1,"lobster"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayout.lt-md","column",1,"form_inputs_player"],["fxFlex","25%","fxFlex.lt-md","100%"],["appearance","outline",1,"center"],["name","nom","matInput","",3,"ngModel","ngModelChange"],["fxFlex","15%","fxFlex.lt-md","100%"],["name","classement","type","number","min","0","max","2000","matInput","",3,"ngModel","ngModelChange"],["name","age","type","number","min","0","max","99","matInput","",3,"ngModel","input","ngModelChange"],["fxFlex","30%","fxFlex.lt-md","100%"],["name","tableaux","multiple","",3,"ngModel","ngModelChange"],[3,"disabled","value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"center","btn_action",3,"disabled","click"],[1,"nbParticipants"],["appearance","outline",1,"shorten"],["matInput","","type","number","min","0","max","20","name","enfant",3,"ngModel","ngModelChange"],["matInput","","type","number","min","0","max","20","name","ado_adulte",3,"ngModel","ngModelChange"],[1,"alerte_info"],["aria-hidden","false"],["appearance","outline",1,"chip-list"],["aria-label","Fruit selection"],["chipList",""],["color","primary","selected","",3,"selectable","removable","removed",4,"ngFor","ngForOf"],["type","text","placeholder","Plats pr\xe9par\xe9s",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[4,"ngIf","ngIfElse"],["noPlatsAlreadyCooked",""],["class","alerte_pill center",4,"ngIf"],["mat-raised-button","","color","primary",1,"center",3,"disabled","click"],["name","age","type","number","min","5","max","99","matInput","",3,"ngModel","input","ngModelChange"],["mat-raised-button","","color","warn",1,"center","btn_action","delete",3,"click"],[3,"disabled","value"],["mat-table","",3,"dataSource"],["matColumnDef","nom"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","buffet"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["color","primary",3,"checked","change"],["mat-header-row",""],["mat-row",""],["color","primary","selected","",3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],["color","primary","selected","",4,"ngFor","ngForOf"],["color","primary","selected",""],[1,"alerte_pill","center"],["color","accent",3,"diameter"]],template:function(t,e){1&t&&(u.kc(0,"div",0),u.Uc(1,D,3,0,"mat-card",1),u.Uc(2,tt,92,36,"mat-card",1),u.jc()),2&t&&(u.Sb(1),u.Cc("ngIf",null!==e.parametres.open&&!e.parametres.open),u.Sb(1),u.Cc("ngIf",null!==e.parametres.open&&e.parametres.open))},directives:[i.l,P.a,i.k,a.u,a.n,a.o,x.c,x.a,y.c,y.f,v.b,a.c,a.m,a.p,a.q,w.a,S.a,O.a,j.c,j.b,M.l,s.j,s.c,s.e,s.b,s.g,s.i,s.d,s.a,U.a,s.f,s.h,j.a,j.d,L.b],pipes:[i.e,I.a,i.t],styles:["table[_ngcontent-%COMP%]{width:50%;margin-left:10px}mat-form-field[_ngcontent-%COMP%]{width:95%}.chip-list[_ngcontent-%COMP%]{width:100%;height:auto!important}i[_ngcontent-%COMP%]{margin-bottom:10px}.nbParticipants[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .nbParticipants[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{display:inline-block}.nbParticipants[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-left:10px}.mat-form-field[_ngcontent-%COMP%]{height:60px}.btn_action[_ngcontent-%COMP%], .form_inputs_player[_ngcontent-%COMP%]{margin-top:10px}.btn_action[_ngcontent-%COMP%]{width:100%}p.alerte_info[_ngcontent-%COMP%]{color:#2f386b}p.alerte_info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], p.alerte_info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{vertical-align:middle}p.alerte_pill[_ngcontent-%COMP%]{border-radius:8px;background-color:#ff6565;color:#fff;width:-moz-fit-content;width:fit-content;padding:7px}.shorten[_ngcontent-%COMP%]{width:57px}[_nghost-%COMP%]     img{width:100%}@media screen and (max-width:959px){.btn_action[_ngcontent-%COMP%]{margin-top:0}.btn_action.delete[_ngcontent-%COMP%]{margin-bottom:20px}table[_ngcontent-%COMP%]{width:100%;margin-left:0}}@media screen and (min-width:960px){[_nghost-%COMP%]     img{width:45%}}"]});class nt{constructor(t){this.router=t,this.summary="",this.router.getCurrentNavigation().extras.hasOwnProperty("state")&&this.router.getCurrentNavigation().extras.state.hasOwnProperty("summary")?this.summary=this.router.getCurrentNavigation().extras.state.summary:this.router.navigateByUrl("/formulaire")}ngOnInit(){}}nt.\u0275fac=function(t){return new(t||nt)(u.ec(c.c))},nt.\u0275cmp=u.Yb({type:nt,selectors:[["app-confirm-formulaire"]],decls:7,vars:3,consts:[[1,"lobster","center"],[1,"summary","center",3,"innerHTML"],[1,"center","alerte_pill"]],template:function(t,e){1&t&&(u.kc(0,"mat-card"),u.kc(1,"h1",0),u.Wc(2,"Merci pour votre inscription, vos informations ont \xe9t\xe9 enregistr\xe9es !"),u.jc(),u.fc(3,"p",1),u.xc(4,"noSanitize"),u.kc(5,"p",2),u.Wc(6,"Vous pouvez quitter la page."),u.jc(),u.jc()),2&t&&(u.Sb(3),u.Cc("innerHTML",u.yc(4,1,e.summary),u.Lc))},directives:[P.a],pipes:[I.a],styles:["mat-card[_ngcontent-%COMP%]{margin:40px!important}p.alerte_pill[_ngcontent-%COMP%]{border-radius:8px;background-color:#2f386b;color:#fff;width:-moz-fit-content;width:fit-content;padding:7px}"]});const ct=[{path:"",component:et,pathMatch:"full"},{path:"submitted",component:nt}];class it{}it.\u0275mod=u.cc({type:it}),it.\u0275inj=u.bc({factory:function(t){return new(t||it)},imports:[[c.f.forChild(ct)],c.f]});var at=n("YUcS"),ot=n("IV7Y");class rt{}rt.\u0275mod=u.cc({type:rt}),rt.\u0275inj=u.bc({factory:function(t){return new(t||rt)},providers:[i.e],imports:[[c.f,i.c,a.r,it,a.i,P.b,j.e,L.a,v.c,O.b,at.a,w.b,S.b,s.l,U.b,ot.a]]})},"5/kC":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var c=n("fXoL"),i=n("jhN1");class a{constructor(t){this.domSanitizer=t}transform(t){return this.domSanitizer.bypassSecurityTrustHtml(t)}}a.\u0275fac=function(t){return new(t||a)(c.ec(i.b))},a.\u0275pipe=c.dc({name:"noSanitize",type:a,pure:!0})},"5nbR":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var c=n("fXoL"),i=n("6wYF"),a=n("tyNb");class o{constructor(t,e){this.accountService=t,this.router=e}canActivate(t,e){return!!this.accountService.isLoggedIn()||(this.accountService.logout(),this.router.navigateByUrl("/login"),!1)}}o.\u0275fac=function(t){return new(t||o)(c.oc(i.a),c.oc(a.c))},o.\u0275prov=c.ac({token:o,factory:o.\u0275fac})},"6wYF":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var c=n("z6cu"),i=n("lJxs"),a=n("JIr8"),o=n("AytR"),r=n("fXoL"),s=n("tk/3"),l=n("tyNb");class u{constructor(t,e){this.http=t,this.router=e,this.baseURL=o.a.endpointNodeApi+"account/"}saveToken(t){this.token=t,localStorage.setItem("userToken",t),this.launchAutoLogout()}login(t){return this.http.post(this.baseURL+"login",t).pipe(Object(i.a)(t=>(t.token&&this.saveToken(t.token),t)),Object(a.a)(t=>Object(c.a)(t)))}editUsername(t){const e=this.getUserDetails()._id;return this.http.put(this.baseURL+"edit/username",{username:t,_id:e}).pipe(Object(i.a)(t=>(t.token&&this.saveToken(t.token),t)),Object(a.a)(t=>Object(c.a)(t)))}editPassword(t,e){const n=this.getUserDetails()._id;return this.http.put(this.baseURL+"edit/password",{actualPassword:t,newPassword:e,_id:n}).pipe(Object(i.a)(t=>(t.token&&this.saveToken(t.token),t)),Object(a.a)(t=>Object(c.a)(t)))}getToken(){return this.token||(this.token=localStorage.getItem("userToken")),this.token}getUserDetails(){const t=this.getToken();let e;return t?(e=t.split(".")[1],e=atob(e),JSON.parse(e)):null}isLoggedIn(){const t=this.getUserDetails();return!!t&&1e3*t.exp>Date.now()}logout(){this.token="",localStorage.removeItem("userToken"),this.router.navigateByUrl("/login")}launchAutoLogout(){setTimeout(()=>{this.logout()},1e3*this.getUserDetails().exp-Date.now())}}u.\u0275fac=function(t){return new(t||u)(r.oc(s.b),r.oc(l.c))},u.\u0275prov=r.ac({token:u,factory:u.\u0275fac,providedIn:"root"})},AytR:function(t,e,n){"use strict";n.d(e,"a",function(){return c});const c={production:!1,anonymousHeader:"ANONYMOUSLY_LOGGED",endpointNodeApi:"http://localhost:3000/api/"}},CMva:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var c=n("AytR"),i=n("fXoL"),a=n("tk/3");class o{constructor(t){this.http=t,this.baseURL=c.a.endpointNodeApi+"buffet/"}getBuffet(){return this.http.get(this.baseURL)}platsAlreadyCooked(){return this.http.get(this.baseURL+"platsAlreadyCooked")}register(t){return this.http.post(this.baseURL+"register",t)}edit(t){return this.http.post(this.baseURL+"edit",t)}}o.\u0275fac=function(t){return new(t||o)(i.oc(a.b))},o.\u0275prov=i.ac({token:o,factory:o.\u0275fac,providedIn:"root"})},FQHi:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var c=n("AytR"),i=n("fXoL"),a=n("tk/3");class o{constructor(t){this.http=t,this.baseURL=c.a.endpointNodeApi+"joueur/"}getPlayer(t){return this.http.get(`${this.baseURL}${t}`)}getAllPlayers(){return this.http.get(this.baseURL)}getTableauPlayers(t){return this.http.get(`${this.baseURL}subscribed/${t}`)}getUnsubscribedPlayer(t){return this.http.get(`${this.baseURL}unsubscribed/${t}`)}create(t,e){return this.http.post(this.baseURL+"create",{joueur:e,tableaux:t})}edit(t){return this.http.put(`${this.baseURL}edit/${t._id}`,t)}unsubscribe(t,e){return this.http.put(`${this.baseURL}unsubscribe/${e}/${t._id}`,{format:t.format})}delete(t){return this.http.delete(`${this.baseURL}delete/${t}`)}getSubscribedUnassignedDouble(t){return this.http.get(`${this.baseURL}unassigned/${t}`)}moveAllPlayers(t,e){return this.http.put(this.baseURL+"move",{previousTableauId:t,newTableauId:e})}pointerPlayer(t){return this.http.put(this.baseURL+"pointer/"+t._id,{pointage:!t.pointage})}}o.\u0275fac=function(t){return new(t||o)(i.oc(a.b))},o.\u0275prov=i.ac({token:o,factory:o.\u0275fac,providedIn:"root"})},FvVH:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var c=n("fXoL"),i=n("XNiG"),a=n("AytR"),o=n("tk/3");class r{constructor(t){this.http=t,this.baseURL=a.a.endpointNodeApi+"tableau/",this.tableauxSource=new i.a,this.tableauxEditSource=new i.a,this.tableauxChange=new c.u,this.nbInscritsChange=new c.u}getAllTableaux(){return this.http.get(this.baseURL)}tableauEnabledToHostPlayers(t){return this.http.get(`${this.baseURL}hostable/${t._id}/${t.age_minimum}/${t.format}/${t.poules}`)}getTableau(t){return this.http.get(`${this.baseURL}${t}`)}getPlayerCountPerTableau(){return this.http.get(this.baseURL+"player_count")}create(t){return this.http.post(this.baseURL+"create",t)}edit(t){return this.http.put(`${this.baseURL}edit/${t._id}`,t)}changeLaunchState(t){return this.http.put(`${this.baseURL}change_launch_state/${t._id}`,{is_launched:t.is_launched})}unsubscribeInvalidPlayers(t){return this.http.put(`${this.baseURL}unsubscribe/invalid/${t._id}`,t)}reset(){return this.http.delete(this.baseURL+"reset")}delete(t){return this.http.delete(`${this.baseURL}delete/${t._id}/${t.format}/${t.poules}`)}unsubscribeAllPlayers(t){return this.http.put(this.baseURL+"unsubscribe_all",{tableau_id:t})}}r.\u0275fac=function(t){return new(t||r)(c.oc(o.b))},r.\u0275prov=c.ac({token:r,factory:r.\u0275fac,providedIn:"root"})},IV7Y:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var c=n("ofXK"),i=n("NFeN"),a=n("qFsG"),o=n("YUcS"),r=n("3Pt+"),s=n("d3UM"),l=n("tk/3"),u=n("0IaG"),d=n("bTqV"),b=n("1jcm"),p=n("fXoL");class h{}h.\u0275mod=p.cc({type:h}),h.\u0275inj=p.bc({factory:function(t){return new(t||h)},imports:[[c.c,i.b,a.c,o.a,r.r,s.b,r.i,l.c,u.f,d.b,b.b]]})},IZQQ:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var c=n("AytR"),i=n("fXoL"),a=n("tk/3");class o{constructor(t){this.http=t,this.baseURL=c.a.endpointNodeApi+"binome/"}getAll(t){return this.http.get(`${this.baseURL}${t}`)}editBinome(t,e,n,c){return this.http.put(`${this.baseURL}edit/${c}`,{oldIdBinome:t,newIdBinome:e,newPlayersList:n,idJoueur:c})}removePlayer(t,e){return this.http.delete(`${this.baseURL}remove_player/${t}/${e}`)}removeAll(t){return this.http.delete(`${this.baseURL}reset/${t}`)}generateBinomes(t){return this.http.put(`${this.baseURL}generate/${t}`,null)}}o.\u0275fac=function(t){return new(t||o)(i.oc(a.b))},o.\u0275prov=i.ac({token:o,factory:o.\u0275fac,providedIn:"root"})},LRnZ:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var c=n("AytR"),i=n("fXoL"),a=n("tk/3");class o{constructor(t){this.http=t,this.baseURL=c.a.endpointNodeApi+"logs/"}getAll(){return this.http.get(this.baseURL)}addLogs(t){return this.http.put(this.baseURL+"add",{log:t})}emptyLogs(){return this.http.post(this.baseURL+"empty",null)}}o.\u0275fac=function(t){return new(t||o)(i.oc(a.b))},o.\u0275prov=i.ac({token:o,factory:o.\u0275fac,providedIn:"root"})},OG8z:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var c=n("AytR"),i=n("fXoL"),a=n("tk/3");class o{constructor(t){this.http=t,this.baseURL=c.a.endpointNodeApi+"poule/"}getAll(t,e){return this.http.get(`${this.baseURL}${t}/${e}`)}editPoule(t,e){return this.http.put(`${this.baseURL}edit/${t}`,e)}setStatus(t){return this.http.put(`${this.baseURL}editStatus/${t._id}`,{locked:!t.locked})}generatePoules(t){return this.http.put(this.baseURL+"generate",t)}deletePoules(t){return this.http.delete(`${this.baseURL}delete/${t}`)}validateAllPoules(t){return this.http.put(`${this.baseURL}validate_all_poules/${t}`,null)}}o.\u0275fac=function(t){return new(t||o)(i.oc(a.b))},o.\u0275prov=i.ac({token:o,factory:o.\u0275fac,providedIn:"root"})},P1pb:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var c=n("AytR"),i=n("fXoL"),a=n("tk/3");class o{constructor(t){this.http=t,this.baseURL=c.a.endpointNodeApi+"parametre/"}getParametres(){return this.http.get(this.baseURL)}edit(t){return this.http.put(this.baseURL+"edit",{parametres:t})}reset(){return this.http.delete(this.baseURL)}openCloseFormulaire(t){return this.http.put(this.baseURL+"change_form_state",{open:t})}}o.\u0275fac=function(t){return new(t||o)(i.oc(a.b))},o.\u0275prov=i.ac({token:o,factory:o.\u0275fac,providedIn:"root"})},Tl80:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var c=n("fXoL");class i{constructor(){}notifyUser(t,e,n,c){e.open(t,c,{duration:2e3,panelClass:["style-"+n]})}}i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=c.ac({token:i,factory:i.\u0275fac,providedIn:"root"})},kgAt:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var c=n("fXoL"),i=n("6wYF"),a=n("tyNb");class o{constructor(t,e){this.accountService=t,this.router=e}canActivate(t,e){return"/login"===e.url&&!this.accountService.isLoggedIn()||(this.router.navigateByUrl("/gestion"),!1)}}o.\u0275fac=function(t){return new(t||o)(c.oc(i.a),c.oc(a.c))},o.\u0275prov=c.ac({token:o,factory:o.\u0275fac})},r0S9:function(t,e,n){"use strict";n.d(e,"a",function(){return b});var c=n("0IaG"),i=n("fXoL"),a=n("ofXK"),o=n("bTqV"),r=n("znSr"),s=n("5/kC");function l(t,e){if(1&t&&(i.kc(0,"h1",6),i.Wc(1),i.jc()),2&t){const t=i.wc();i.Cc("ngClass",t.data.h1_class),i.Sb(1),i.Yc(" ",t.data.action,"\n")}}function u(t,e){if(1&t&&(i.kc(0,"h2",7),i.Wc(1),i.jc()),2&t){const t=i.wc();i.Sb(1),i.Yc(" ",t.data.option,"\n")}}function d(t,e){if(1&t&&(i.fc(0,"p",8),i.xc(1,"noSanitize")),2&t){const t=i.wc();i.Cc("innerHTML",i.yc(1,1,t.data.text),i.Lc)}}class b{constructor(t){this.data=t}}b.\u0275fac=function(t){return new(t||b)(i.ec(c.a))},b.\u0275cmp=i.Yb({type:b,selectors:[["app-dialog"]],decls:8,vars:6,consts:[["mat-dialog-title","","class","center",3,"ngClass",4,"ngIf"],["mat-dialog-content","","class","center",4,"ngIf"],["mat-dialog-content","","class","center summary",3,"innerHTML",4,"ngIf"],["mat-dialog-actions","",1,"center"],["mat-button","","mat-dialog-close",""],["mat-button","","color","primary","cdkFocusInitial","",3,"mat-dialog-close"],["mat-dialog-title","",1,"center",3,"ngClass"],["mat-dialog-content","",1,"center"],["mat-dialog-content","",1,"center","summary",3,"innerHTML"]],template:function(t,e){1&t&&(i.Uc(0,l,2,2,"h1",0),i.Uc(1,u,2,1,"h2",1),i.Uc(2,d,2,3,"p",2),i.kc(3,"div",3),i.kc(4,"button",4),i.Wc(5),i.jc(),i.kc(6,"button",5),i.Wc(7),i.jc(),i.jc()),2&t&&(i.Cc("ngIf",e.data.action),i.Sb(1),i.Cc("ngIf",e.data.option),i.Sb(1),i.Cc("ngIf",e.data.text),i.Sb(3),i.Xc(e.data.close_button?e.data.close_button:"Annuler"),i.Sb(1),i.Cc("mat-dialog-close",e.data.id),i.Sb(1),i.Xc(e.data.action_button_text))},directives:[a.l,c.c,o.a,c.d,c.h,a.j,r.a,c.e],pipes:[s.a],styles:["h1[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px}h1.form_modale[_ngcontent-%COMP%]{padding-bottom:5px}h1[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}h2[_ngcontent-%COMP%]{white-space:pre-wrap}"]})},zUnb:function(t,e,n){"use strict";n.r(e);var c=n("fXoL"),i=n("AytR"),a=n("jhN1"),o=n("tyNb");const r=[{path:"",redirectTo:"/gestion",pathMatch:"full"},{path:"login",loadChildren:()=>n.e(1).then(n.bind(null,"6Xmh")).then(t=>t.AuthModules)},{path:"gestion",loadChildren:()=>n.e(2).then(n.bind(null,"hyBF")).then(t=>t.GestionModules)},{path:"formulaire",loadChildren:()=>Promise.resolve().then(n.bind(null,"2PTZ")).then(t=>t.FormulaireModules)}];class s{}s.\u0275mod=c.cc({type:s}),s.\u0275inj=c.bc({factory:function(t){return new(t||s)},imports:[[o.f.forRoot(r,{preloadingStrategy:o.b,useHash:!0})],o.f]});var l=n("6wYF"),u=n("FvVH"),d=n("dNgK"),b=n("Tl80"),p=n("/t3+"),h=n("ofXK"),g=n("bTqV"),f=n("NFeN");function m(t,e){if(1&t&&(c.kc(0,"span"),c.Wc(1),c.jc()),2&t){const t=c.wc().$implicit;c.Sb(1),c.Yc("-",t.age_minimum," ans")}}function _(t,e){1&t&&(c.kc(0,"mat-icon",10),c.Wc(1,"play_arrow"),c.jc())}function k(t,e){1&t&&(c.kc(0,"mat-icon",11),c.Wc(1,"check_circle"),c.jc())}function C(t,e){if(1&t&&(c.kc(0,"button",7),c.kc(1,"span"),c.Wc(2),c.xc(3,"titlecase"),c.Uc(4,m,2,1,"span",0),c.jc(),c.Uc(5,_,2,0,"mat-icon",8),c.Uc(6,k,2,0,"mat-icon",9),c.jc()),2&t){const t=e.$implicit;c.Cc("routerLink","/tableau/"+t._id),c.Sb(2),c.Yc("",c.yc(3,5,t.nom)," "),c.Sb(2),c.Cc("ngIf",null!==t.age_minimum),c.Sb(1),c.Cc("ngIf",1===t.is_launched),c.Sb(1),c.Cc("ngIf",2===t.is_launched)}}function P(t,e){if(1&t&&(c.kc(0,"div"),c.Uc(1,C,7,7,"button",6),c.jc()),2&t){const t=c.wc();c.Sb(1),c.Cc("ngForOf",t.tableaux)}}function x(t,e){1&t&&(c.kc(0,"button",12),c.Wc(1,"Gestion"),c.jc())}function y(t,e){1&t&&(c.kc(0,"button",13),c.Wc(1,"Espace priv\xe9"),c.jc())}function v(t,e){if(1&t){const t=c.lc();c.kc(0,"button",14),c.sc("click",function(){c.Kc(t);return c.wc().accountService.logout()}),c.Wc(1,"Se d\xe9connecter"),c.jc()}}class w{constructor(t,e,n,c){this.accountService=t,this.tableauService=e,this.snackBar=n,this.notifyService=c}ngOnInit(){this.accountService.isLoggedIn()&&this.getAllTableaux(),this.tableauxSubscription=this.tableauService.tableauxSource.subscribe(t=>this.tableaux=t),this.tableauxEditionSubscription=this.tableauService.tableauxEditSource.subscribe(t=>{this.tableaux.map(e=>(e._id===t._id&&(e.is_launched=t.is_launched),t))})}ngOnDestroy(){this.tableauxSubscription.unsubscribe(),this.tableauxEditionSubscription.unsubscribe()}getAllTableaux(){this.tableauService.getAllTableaux().subscribe(t=>this.tableaux=t,t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}}w.\u0275fac=function(t){return new(t||w)(c.ec(l.a),c.ec(u.a),c.ec(d.a),c.ec(b.a))},w.\u0275cmp=c.Yb({type:w,selectors:[["app-root"]],decls:9,vars:4,consts:[[4,"ngIf"],[1,"spacer"],["mat-raised-button","","routerLinkActive","active","routerLink","/gestion",4,"ngIf"],["mat-raised-button","","routerLink","/formulaire","routerLinkActive","active"],["mat-raised-button","","routerLinkActive","active","routerLink","/login",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-raised-button","","routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf"],["mat-raised-button","","routerLinkActive","active",3,"routerLink"],["class","play",4,"ngIf"],["class","finished",4,"ngIf"],[1,"play"],[1,"finished"],["mat-raised-button","","routerLinkActive","active","routerLink","/gestion"],["mat-raised-button","","routerLinkActive","active","routerLink","/login"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(c.kc(0,"mat-toolbar"),c.Uc(1,P,2,1,"div",0),c.fc(2,"span",1),c.Uc(3,x,2,0,"button",2),c.kc(4,"button",3),c.Wc(5,"Formulaire"),c.jc(),c.Uc(6,y,2,0,"button",4),c.Uc(7,v,2,0,"button",5),c.jc(),c.fc(8,"router-outlet")),2&t&&(c.Sb(1),c.Cc("ngIf",e.accountService.isLoggedIn()),c.Sb(2),c.Cc("ngIf",e.accountService.isLoggedIn()),c.Sb(3),c.Cc("ngIf",!e.accountService.isLoggedIn()),c.Sb(1),c.Cc("ngIf",e.accountService.isLoggedIn()))},directives:[p.a,h.l,g.a,o.d,o.e,o.g,h.k,f.a],pipes:[h.t],styles:["button[_ngcontent-%COMP%]{margin-right:10px}mat-toolbar[_ngcontent-%COMP%]{background:#012242}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]{position:sticky;position:-webkit-sticky;top:0;z-index:2}.active[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}mat-icon.play[_ngcontent-%COMP%]{color:orange}mat-icon.finished[_ngcontent-%COMP%]{color:green}.summary[_ngcontent-%COMP%]{white-space:pre-line}"]});var S=n("3Pt+"),O=n("YUcS"),j=n("Wp6s"),M=n("5+WD"),U=n("Xa2L"),L=n("+MBc"),I=n("qFsG"),D=n("d3UM"),A=n("+0xr"),W=n("A5z7"),B=n("wZkO"),$=n("r0S9"),T=n("OG8z"),F=n("IZQQ"),R=n("FQHi"),K=n("0IaG"),z=n("JX91"),H=n("lJxs"),N=n("Dh3D"),J=n("XiUz"),Y=n("kmnG"),E=n("/1cH"),X=n("FKr1"),G=n("znSr");const q=function(t){return{"hide-autocomplete":t}};function V(t,e){if(1&t&&(c.kc(0,"mat-option",27),c.Wc(1),c.jc()),2&t){const t=e.$implicit,n=c.wc(2);c.Cc("value",t.nom)("ngClass",c.Ec(4,q,!n.showAutocomplete)),c.Sb(1),c.Zc(" ",t.nom," - ",t.classement," points ")}}function Z(t,e){if(1&t){const t=c.lc();c.kc(0,"mat-card"),c.kc(1,"h2",19),c.Wc(2,"Inscrire un joueur"),c.jc(),c.kc(3,"form",20),c.sc("submit",function(){c.Kc(t);return c.wc().subscribe()}),c.kc(4,"mat-form-field",21),c.kc(5,"mat-icon",22),c.Wc(6,"title"),c.jc(),c.kc(7,"mat-label"),c.Wc(8,"Nom du joueur"),c.jc(),c.kc(9,"input",23),c.sc("ngModelChange",function(e){c.Kc(t);return c.wc().joueur.nom=e})("ngModelChange",function(e){c.Kc(t);return c.wc().typingAutocomplete(e)}),c.jc(),c.kc(10,"mat-autocomplete",null,24),c.Uc(12,V,2,6,"mat-option",25),c.xc(13,"async"),c.jc(),c.jc(),c.kc(14,"button",26),c.Wc(15,"Inscrire"),c.jc(),c.jc(),c.jc()}if(2&t){const t=c.Hc(11),e=c.wc();c.Sb(9),c.Cc("formControl",e.joueurControl)("ngModel",e.joueur.nom)("matAutocomplete",t),c.Sb(3),c.Cc("ngForOf",c.yc(13,5,e.optionsListJoueurs)),c.Sb(2),c.Cc("disabled",!e.isInvalidPlayer())}}function Q(t,e){1&t&&(c.kc(0,"span"),c.Wc(1,"s"),c.jc())}function tt(t,e){if(1&t){const t=c.lc();c.kc(0,"button",28),c.sc("click",function(){c.Kc(t);return c.wc().unsubscribeAll()}),c.Wc(1,"D\xe9sinscrire tous les joueurs"),c.jc()}if(2&t){const t=c.wc();c.Cc("disabled",0!==t.tableau.is_launched)}}function et(t,e){if(1&t&&(c.kc(0,"mat-option",35),c.Wc(1),c.xc(2,"titlecase"),c.jc()),2&t){const t=e.$implicit;c.Cc("value",t),c.Sb(1),c.Zc("",c.yc(2,3,t.nom)," - ",t.age_minimum," ans")}}function nt(t,e){if(1&t){const t=c.lc();c.kc(0,"div",29),c.kc(1,"div",30),c.kc(2,"div",31),c.kc(3,"button",32),c.sc("click",function(){c.Kc(t);return c.wc().moveAllPlayers()}),c.Wc(4,"Basculer tous les joueurs"),c.jc(),c.jc(),c.kc(5,"div",31),c.kc(6,"mat-form-field",21),c.kc(7,"mat-icon",22),c.Wc(8,"format_list_bulleted"),c.jc(),c.kc(9,"mat-label"),c.Wc(10,"Tableaux"),c.jc(),c.kc(11,"mat-select",33),c.sc("ngModelChange",function(e){c.Kc(t);return c.wc().hostableTableau=e}),c.Uc(12,et,3,5,"mat-option",34),c.jc(),c.jc(),c.jc(),c.jc(),c.jc()}if(2&t){const t=c.wc();c.Sb(3),c.Cc("disabled",null===t.hostableTableau),c.Sb(8),c.Cc("ngModel",t.hostableTableau),c.Sb(1),c.Cc("ngForOf",t.listTableauHostable)}}function ct(t,e){1&t&&(c.kc(0,"th",36),c.Wc(1,"Nom"),c.jc())}const it=function(t,e){return{pointage_KO:t,pointage_OK:e}};function at(t,e){if(1&t&&(c.kc(0,"td",37),c.Wc(1),c.jc()),2&t){const t=e.$implicit,n=e.index,i=c.wc();c.Ub(i.isChapeauHaut(n)),c.Cc("ngClass",c.Fc(4,it,!t.pointage,t.pointage)),c.Sb(1),c.Xc(t.nom)}}function ot(t,e){1&t&&(c.kc(0,"th",36),c.Wc(1," Classement "),c.jc())}function rt(t,e){if(1&t&&(c.kc(0,"td",38),c.Wc(1),c.jc()),2&t){const t=e.$implicit,n=e.index,i=c.wc();c.Ub(i.isChapeauHaut(n)),c.Sb(1),c.Xc(t.classement)}}function st(t,e){1&t&&(c.kc(0,"th",40),c.Wc(1,"\xc2ge"),c.jc())}function lt(t,e){if(1&t&&(c.kc(0,"td",38),c.Wc(1),c.jc()),2&t){const t=e.$implicit;c.Sb(1),c.Xc(t.age)}}function ut(t,e){1&t&&(c.ic(0,39),c.Uc(1,st,2,0,"th",15),c.Uc(2,lt,2,1,"td",16),c.hc())}function dt(t,e){1&t&&c.fc(0,"th",40)}function bt(t,e){if(1&t){const t=c.lc();c.kc(0,"td",38),c.kc(1,"button",41),c.sc("click",function(){c.Kc(t);const n=e.$implicit;return c.wc().unsubscribe(n)}),c.Wc(2,"D\xe9sinscrire"),c.jc(),c.jc()}if(2&t){const t=c.wc();c.Sb(1),c.Cc("disabled",0!==t.tableau.is_launched)}}function pt(t,e){1&t&&c.fc(0,"tr",42)}function ht(t,e){1&t&&c.fc(0,"tr",43)}class gt{constructor(t,e,n,i,a,o,r,s,l){this.joueurService=t,this.dialog=e,this.poulesService=n,this.router=i,this.route=a,this.snackBar=o,this.notifyService=r,this.tableauService=s,this.binomeService=l,this.tableau={format:null,_id:null,is_launched:null,nom:null,poules:null,consolante:null,maxNumberPlayers:null,age_minimum:null,nbPoules:null,handicap:null},this.listJoueurs=[],this.listTableauHostable=[],this.otherPlayers=[],this.joueurControl=new S.d(""),this.showAutocomplete=!1,this.dataSource=new A.k(this.listJoueurs),this.showChapeauColors=!1,this.generatePoules=new c.u,this.getAllBinomes=new c.u,this.getSubscribedUnassignedPlayers=new c.u,this.sort=new N.a}ngOnInit(){this.route.paramMap.subscribe(()=>{this.joueur={nom:null,age:null,buffet:null,classement:null,_id:null,tableaux:null,pointage:null},this.getTableau(this.router.url.split("/").pop()),this.hostableTableau=null,this.otherPlayers&&(this.optionsListJoueurs=this.joueurControl.valueChanges.pipe(Object(z.a)(""),Object(H.a)(t=>this._filter(t)))),this.tableauxEditionSubscription=this.tableauService.tableauxEditSource.subscribe(t=>{this.tableau=t})})}ngOnDestroy(){this.tableauxEditionSubscription.unsubscribe()}_filter(t){if(t&&null!=this.otherPlayers){const e=t.toLowerCase();return this.otherPlayers.filter(t=>t.nom.toLowerCase().includes(e)&&(null===this.tableau.age_minimum||null!==t.age&&t.age<this.tableau.age_minimum))}return[]}typingAutocomplete(t){this.showAutocomplete=t&&t.length>0}getAllPlayers(){this.joueurService.getTableauPlayers(this.tableau._id).subscribe(t=>{this.listJoueurs=t,this.dataSource=new A.k(t),this.dataSource.sort=this.sort},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}getTableau(t){this.tableauService.getTableau(t).subscribe(t=>{this.tableau=t,this.getAllPlayers(),this.getUnsubscribedPlayers(),this.displayedColumns=null!==this.tableau.age_minimum?["nom","classement","age","delete"]:["nom","classement","delete"],this.tableau.age_minimum&&this.getTableauxHostable()},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}getTableauxHostable(){this.tableauService.tableauEnabledToHostPlayers(this.tableau).subscribe(t=>this.listTableauHostable=t,t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}getUnsubscribedPlayers(){this.joueurService.getUnsubscribedPlayer(this.tableau._id).subscribe(t=>this.otherPlayers=t,t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}subscribe(){this.joueurService.create([this.tableau],this.joueur).subscribe(()=>{this.joueur={classement:null,age:null,nom:null,_id:null,buffet:null,pointage:!1,tableaux:null},this.tableau.poules&&"simple"===this.tableau.format&&this.generatePoules.emit(),"double"===this.tableau.format&&(this.getAllBinomes.emit(),this.getSubscribedUnassignedPlayers.emit()),this.getAllPlayers(),this.getUnsubscribedPlayers()},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}unsubscribePlayer(t){this.joueurService.unsubscribe(this.tableau,t).subscribe(()=>{this.tableau.poules&&this.generatePoules.emit(),"double"===this.tableau.format&&(this.getAllBinomes.emit(),this.getSubscribedUnassignedPlayers.emit()),this.getAllPlayers(),this.getUnsubscribedPlayers()},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}unsubscribeAllPlayers(){this.tableauService.unsubscribeAllPlayers(this.tableau._id).subscribe(()=>{"double"===this.tableau.format?this.removeAllBinomes():this.tableau.poules&&this.generatePoules.emit(),this.getAllPlayers(),this.getUnsubscribedPlayers()},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}unsubscribe(t){const e={id:t._id,action:"D\xe9sinscrire le joueur du tableau et r\xe9g\xe9n\xe9rer les poules du tableau ?",option:null,action_button_text:"D\xe9sinscrire"};this.dialog.open($.a,{width:"45%",data:e}).afterClosed().subscribe(t=>{t&&this.unsubscribePlayer(t)})}isInvalidPlayer(){return null!==this.joueur.nom&&""!==this.joueur.nom.trim()&&0!==this.otherPlayers.filter(t=>this.joueur.nom===t.nom).length}unsubscribeAll(){this.dialog.open($.a,{width:"45%",data:{id:"true",action:"D\xe9sinscrire tous les joueurs du tableau ?",option:null,action_button_text:"D\xe9sinscrire"}}).afterClosed().subscribe(t=>{t&&(this.unsubscribeAllPlayers(),"double"===this.tableau.format&&(this.getAllBinomes.emit(),this.getSubscribedUnassignedPlayers.emit()))})}moveAllPlayers(){const t={id:this.hostableTableau._id,action:"Basculer tous les joueurs dans ce tableau et r\xe9g\xe9n\xe9rer les poules ?",option:null,action_button_text:"Basculer"};this.dialog.open($.a,{width:"45%",data:t}).afterClosed().subscribe(t=>{t&&this.joueurService.moveAllPlayers(this.tableau._id,this.hostableTableau._id).subscribe(()=>{this.getAllPlayers(),this.generateHostablePoules(),this.tableau.poules&&this.generatePoules.emit(),"double"===this.tableau.format&&(this.getAllBinomes.emit(),this.getSubscribedUnassignedPlayers.emit()),this.notifyService.notifyUser("Les joueurs ont \xe9t\xe9 bascul\xe9s",this.snackBar,"success","OK")},t=>this.notifyService.notifyUser(t.error,this.snackBar,"error","OK"))})}generateHostablePoules(){this.poulesService.generatePoules(this.hostableTableau).subscribe(()=>{},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}playersMovable(){return null!==this.tableau.age_minimum&&this.listTableauHostable.length&&this.listJoueurs.length>0}removeAllBinomes(){this.binomeService.removeAll(this.tableau._id).subscribe(()=>{this.tableau.poules&&this.generatePoules.emit(),"double"===this.tableau.format&&(this.getAllBinomes.emit(),this.getSubscribedUnassignedPlayers.emit())},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}showChapeau(t){this.showChapeauColors="classement"===t.active&&"desc"===t.direction}isChapeauHaut(t){if(this.showChapeauColors){return t>=(this.listJoueurs.length%2?this.listJoueurs.length/2:this.listJoueurs.length/2+.5)?"chapeauBas":"chapeauHaut"}return""}}gt.\u0275fac=function(t){return new(t||gt)(c.ec(R.a),c.ec(K.b),c.ec(T.a),c.ec(o.c),c.ec(o.a),c.ec(d.a),c.ec(b.a),c.ec(u.a),c.ec(F.a))},gt.\u0275cmp=c.Yb({type:gt,selectors:[["app-list-players"]],viewQuery:function(t,e){var n;(1&t&&c.ad(N.a,!0),2&t)&&(c.Gc(n=c.tc())&&(e.sort=n.first))},outputs:{generatePoules:"generatePoules",getAllBinomes:"getAllBinomes",getSubscribedUnassignedPlayers:"getSubscribedUnassignedPlayers"},decls:24,vars:11,consts:[[1,"container"],[4,"ngIf"],[1,"lobster","center","second_h2"],["fxLayout","row"],[1,"vertically_centered",3,"fxFlex"],["class","center unsubscribeAll","mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],["fxFlex","50%","class","vertically_centered",4,"ngIf"],["mat-table","","matSort","",3,"dataSource","hidden","matSortChange"],["matColumnDef","nom"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",3,"class","ngClass",4,"matCellDef"],["matColumnDef","classement"],["mat-cell","",3,"class",4,"matCellDef"],["matColumnDef","age",4,"ngIf"],["matColumnDef","delete"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"lobster","center"],[3,"submit"],["appearance","outline",1,"center"],["matSuffix",""],["type","text","name","nom","matInput","",3,"formControl","ngModel","matAutocomplete","ngModelChange"],["auto","matAutocomplete"],[3,"value","ngClass",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"center",3,"disabled"],[3,"value","ngClass"],["mat-raised-button","","color","warn",1,"center","unsubscribeAll",3,"disabled","click"],["fxFlex","50%",1,"vertically_centered"],["fxLayout","column"],["fxFlex","50%"],["mat-raised-button","",1,"center","movePlayers",3,"disabled","click"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",3,"ngClass"],["mat-cell",""],["matColumnDef","age"],["mat-header-cell",""],["mat-raised-button","","color","warn",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(c.kc(0,"div",0),c.Uc(1,Z,16,7,"mat-card",1),c.kc(2,"mat-card"),c.kc(3,"h2",2),c.Wc(4),c.Uc(5,Q,2,0,"span",1),c.Wc(6,")"),c.jc(),c.kc(7,"div",3),c.kc(8,"div",4),c.Uc(9,tt,2,1,"button",5),c.jc(),c.Uc(10,nt,13,3,"div",6),c.jc(),c.kc(11,"table",7),c.sc("matSortChange",function(t){return e.showChapeau(t)}),c.ic(12,8),c.Uc(13,ct,2,0,"th",9),c.Uc(14,at,2,7,"td",10),c.hc(),c.ic(15,11),c.Uc(16,ot,2,0,"th",9),c.Uc(17,rt,2,3,"td",12),c.hc(),c.Uc(18,ut,3,0,"ng-container",13),c.ic(19,14),c.Uc(20,dt,1,0,"th",15),c.Uc(21,bt,3,1,"td",16),c.hc(),c.Uc(22,pt,1,0,"tr",17),c.Uc(23,ht,1,0,"tr",18),c.jc(),c.jc(),c.jc()),2&t&&(c.Sb(1),c.Cc("ngIf",0===e.tableau.is_launched),c.Sb(3),c.Yc("Liste des joueurs (",e.listJoueurs.length," inscrit"),c.Sb(1),c.Cc("ngIf",e.listJoueurs.length>1),c.Sb(3),c.Cc("fxFlex",e.playersMovable()?"50%":"100%"),c.Sb(1),c.Cc("ngIf",e.listJoueurs.length),c.Sb(1),c.Cc("ngIf",e.playersMovable()),c.Sb(1),c.Cc("dataSource",e.dataSource)("hidden",!e.listJoueurs.length),c.Sb(7),c.Cc("ngIf",null!==e.tableau.age_minimum),c.Sb(4),c.Cc("matHeaderRowDef",e.displayedColumns),c.Sb(1),c.Cc("matRowDefColumns",e.displayedColumns))},directives:[h.l,j.a,J.c,J.a,A.j,N.a,A.c,A.e,A.b,A.g,A.i,S.u,S.n,S.o,Y.c,f.a,Y.g,Y.f,I.b,S.c,E.c,S.m,S.e,E.a,h.k,g.a,X.l,h.j,G.a,D.a,S.p,A.d,N.b,A.a,A.f,A.h],pipes:[h.b,h.t],styles:["h2.second_h2[_ngcontent-%COMP%]{margin-bottom:8px}td.pointage_KO[_ngcontent-%COMP%]{color:grey}td.pointage_OK[_ngcontent-%COMP%]{color:green}button.unsubscribeAll[_ngcontent-%COMP%]{margin-bottom:18px}td.chapeauHaut[_ngcontent-%COMP%]:first-child{border-radius:5px 0 0 5px;background-color:#ffc1c1}td.chapeauHaut[_ngcontent-%COMP%]:nth-child(2){border-radius:0 5px 5px 0;background-color:#ffc1c1}td.chapeauBas[_ngcontent-%COMP%]:first-child{border-radius:5px 0 0 5px;background-color:#c1daff}td.chapeauBas[_ngcontent-%COMP%]:nth-child(2){border-radius:0 5px 5px 0;background-color:#c1daff}button.movePlayers[_ngcontent-%COMP%]{background-color:#1eab1e;color:#fff;margin-bottom:5px}div.vertically_centered[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]});var ft=n("+kNy");class mt{constructor(){}calculHandicap(t,e){const n=0===t&&0!==e,c=0===e&&0!==t;n?t=500:c&&(e=500);let i=!1,a=[0,0];if(t!==e||Math.abs(t-e)<50){t<e&&(i=!0);const n=Math.abs(t-e);n>=50&&n<=99?a=[-1,0]:n>=100&&n<=199?a=[-1,1]:n>=200&&n<=299?a=[-2,1]:n>=300&&n<=399?a=[-2,2]:n>=400&&n<=499?a=[-3,2]:n>=500&&n<=599?a=[-3,3]:n>=600&&n<=699?a=[-4,3]:n>=700&&n<=799?a=[-4,4]:n>=800&&(a=[-5,4])}return n&&!i||c&&i?a[0]++:(c&&!i||n&&i)&&a[1]++,i&&a.reverse(),a.map(t=>t=t>0?"+"+t:String(t))}}function _t(t,e){1&t&&(c.kc(0,"mat-icon",11),c.Wc(1,"emoji_events"),c.jc())}function kt(t,e){1&t&&(c.kc(0,"mat-icon",12),c.Wc(1,"looks_two"),c.jc())}function Ct(t,e){1&t&&(c.kc(0,"mat-icon",13),c.Wc(1,"looks_3"),c.jc())}function Pt(t,e){1&t&&(c.kc(0,"mat-icon",14),c.Wc(1,"looks_4"),c.jc())}function xt(t,e){if(1&t&&(c.kc(0,"div",6),c.Uc(1,_t,2,0,"mat-icon",7),c.Uc(2,kt,2,0,"mat-icon",8),c.Uc(3,Ct,2,0,"mat-icon",9),c.Uc(4,Pt,2,0,"mat-icon",10),c.jc()),2&t){const t=c.wc().$implicit,e=c.wc();c.Sb(1),c.Cc("ngIf",1===e.match.id&&t.winner),c.Sb(1),c.Cc("ngIf",1===e.match.id&&!t.winner),c.Sb(1),c.Cc("ngIf",2===e.match.id&&t.winner),c.Sb(1),c.Cc("ngIf",2===e.match.id&&!t.winner)}}function yt(t,e){if(1&t&&(c.kc(0,"span",17),c.kc(1,"b"),c.Wc(2),c.jc(),c.jc()),2&t){const t=c.wc(2).index,e=c.wc();c.Sb(2),c.Xc(e.getHandicap(e.match.joueurs[0]._id.classement,e.match.joueurs[1]._id.classement)[t])}}function vt(t,e){if(1&t){const t=c.lc();c.kc(0,"mat-chip-list"),c.kc(1,"mat-chip",15),c.sc("click",function(){c.Kc(t);const e=c.wc().$implicit,n=c.wc();return n.setWinner(n.match,e._id._id)}),c.Wc(2),c.jc(),c.Uc(3,yt,3,1,"span",16),c.jc()}if(2&t){const t=c.wc().$implicit,e=c.wc();c.Sb(1),c.Ub("ngtt__team-title "+e.isClickable(e.match)),c.Cc("disabled",1===e.match.joueurs.length||2===e.tableau.is_launched||e.disabledMatChip)("color",e.getColor(e.match,t)),c.Sb(1),c.Yc(" ",e.getName(t._id)," "),c.Sb(1),c.Cc("ngIf",e.tableau.handicap&&e.matchHasTwoPlayers(e.match.joueurs))}}function wt(t,e){if(1&t&&(c.ic(0),c.kc(1,"div",2),c.Uc(2,xt,5,4,"div",3),c.kc(3,"div",4),c.Uc(4,vt,4,6,"mat-chip-list",5),c.jc(),c.jc(),c.hc()),2&t){const t=e.$implicit,n=c.wc();c.Sb(2),c.Cc("ngIf",2===n.match.joueurs.length&&!(!n.match.joueurs[0].winner&&!n.match.joueurs[1].winner)&&1===n.match.round),c.Sb(2),c.Cc("ngIf",t._id)}}mt.\u0275fac=function(t){return new(t||mt)},mt.\u0275prov=c.ac({token:mt,factory:mt.\u0275fac,providedIn:"root"});class St{constructor(t,e,n,i){this.tournoiService=t,this.snackBar=e,this.notifyService=n,this.handicapService=i,this.updateBracket=new c.u,this.tableau={format:null,_id:null,is_launched:null,nom:null,poules:null,consolante:null,maxNumberPlayers:null,age_minimum:null,nbPoules:null,handicap:null},this.disabledMatChip=!1}ngOnInit(){}setWinner(t,e){if(t.joueurs.length>1&&2!==this.tableau.is_launched&&!t.joueurs[0].winner&&(t.joueurs[1]&&!t.joueurs[1].winner||!t.joueurs[1])){this.disabledMatChip=!0;const n=2===t.joueurs.length&&t.joueurs[0]._id&&t.joueurs[1]._id?t.joueurs.filter(t=>t._id._id!==e)[0]._id._id:null;this.tournoiService.edit(this.tableau._id,t.round,t.id,e,n,this.phase).subscribe(()=>{this.updateBracket.emit(),this.disabledMatChip=!1},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK"),this.disabledMatChip=!1})}}isClickable(t){return t.joueurs.length>1&&!t.joueurs[0].winner&&(t.joueurs[1]&&!t.joueurs[1].winner||!t.joueurs[1])?"clickable":""}getColor(t,e){return t.joueurs.length<2&&!t.joueurs[0].winner||!t.joueurs[0].winner&&!t.joueurs[1].winner?"undefined":e.winner?"winner":"looser"}getName(t){return"simple"===this.tableau.format?this.formatGetName(t.nom+" - "+t.classement+" points"):"double"===this.tableau.format?this.formatGetName(t.joueurs?t.joueurs.map(t=>t.nom).join(" - "):""):void 0}formatGetName(t){return t.length>30&&"double"===this.tableau.format?t.substring(0,27)+"...":t}getHandicap(t,e){return this.handicapService.calculHandicap(t,e)}matchHasTwoPlayers(t){return 2===t.length&&t.every(t=>t.hasOwnProperty("_id"))}}function Ot(t,e){1&t&&(c.kc(0,"mat-icon"),c.fc(1,"mat-spinner",5),c.jc()),2&t&&(c.Sb(1),c.Cc("diameter",20))}function jt(t,e){1&t&&(c.kc(0,"mat-card"),c.kc(1,"mat-icon",6),c.Wc(2,"info"),c.jc(),c.kc(3,"p"),c.kc(4,"b"),c.Wc(5,"Pour les consolantes :"),c.jc(),c.jc(),c.kc(6,"ul"),c.kc(7,"li"),c.Wc(8,"- si vous souhaitez un rep\xeachage des perdants du premier tour des phases finales en consolantes, renseignez "),c.kc(9,"b"),c.Wc(10,"tous les r\xe9sultats du premier tour de la phase finale"),c.jc(),c.Wc(11,", puis g\xe9n\xe9rez le tableau de la consolante;"),c.jc(),c.kc(12,"li"),c.Wc(13,"- si vous ne souhaitez pas de rep\xeachage, g\xe9n\xe9rez le tableau de la consolante "),c.kc(14,"b"),c.Wc(15,"AVANT"),c.jc(),c.Wc(16," le tableau des phases finales."),c.jc(),c.jc(),c.jc())}function Mt(t,e){if(1&t){const t=c.lc();c.kc(0,"div",3),c.kc(1,"button",4),c.sc("click",function(){c.Kc(t);return c.wc().generateBracket()}),c.Uc(2,Ot,2,1,"mat-icon",1),c.Wc(3," G\xe9n\xe9rer le tableau "),c.jc(),c.Uc(4,jt,17,0,"mat-card",1),c.jc()}if(2&t){const t=c.wc();c.Sb(1),c.Cc("disabled",2===t.tableau.is_launched),c.Sb(1),c.Cc("ngIf",t.spinnerShown),c.Sb(2),c.Cc("ngIf",t.tableau.consolante)}}function Ut(t,e){if(1&t&&c.fc(0,"ngtt-single-elimination-tree",8),2&t){const t=c.wc(2),e=c.Hc(3);c.Cc("tournament",t.bracket)("matchTemplate",e)}}function Lt(t,e){if(1&t&&(c.ic(0),c.Uc(1,Ut,1,2,"ngtt-single-elimination-tree",7),c.hc()),2&t){const t=c.wc();c.Sb(1),c.Cc("ngIf",t.bracket.rounds.length)}}function It(t,e){if(1&t){const t=c.lc();c.kc(0,"app-match",9),c.sc("updateBracket",function(){c.Kc(t);return c.wc().getBracket()}),c.jc()}if(2&t){const t=e.$implicit,n=c.wc();c.Cc("tableau",n.tableau)("phase",n.phase)("match",t)}}St.\u0275fac=function(t){return new(t||St)(c.ec(ft.a),c.ec(d.a),c.ec(b.a),c.ec(mt))},St.\u0275cmp=c.Yb({type:St,selectors:[["app-match"]],inputs:{match:"match",phase:"phase",tableau:"tableau"},outputs:{updateBracket:"updateBracket"},decls:2,vars:1,consts:[[1,"ngtt__match-wrapper"],[4,"ngFor","ngForOf"],["fxLayout","row"],["id","finale",4,"ngIf"],[1,"ngtt__team-wrapper"],[4,"ngIf"],["id","finale"],["id","yellow","matSuffix","",4,"ngIf"],["id","white","matSuffix","",4,"ngIf"],["id","bronze","matSuffix","",4,"ngIf"],["id","silver","matSuffix","",4,"ngIf"],["id","yellow","matSuffix",""],["id","white","matSuffix",""],["id","bronze","matSuffix",""],["id","silver","matSuffix",""],[3,"disabled","color","click"],["class","handicap",4,"ngIf"],[1,"handicap"]],template:function(t,e){1&t&&(c.kc(0,"div",0),c.Uc(1,wt,5,2,"ng-container",1),c.jc()),2&t&&(c.Sb(1),c.Cc("ngForOf",e.match.joueurs))},directives:[h.k,J.c,h.l,f.a,Y.g,W.c,W.a],styles:['.ngtt-se__container[_ngcontent-%COMP%]{background-color:#2b3e50;display:inline-block;box-sizing:border-box!important}.ngtt-se__match-component-container[_ngcontent-%COMP%]{display:flex;height:100px;width:350px;background-color:initial;box-sizing:border-box!important}.ngtt-se__bracket-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;box-sizing:border-box!important}.ngtt-se__round-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;min-width:400px;box-sizing:border-box!important}.ngtt-se__match-wrapper[_ngcontent-%COMP%]{align-items:center;height:130px;width:400px;padding:15px 25px;position:relative}.ngtt-se__match-wrapper[_ngcontent-%COMP%], .ngtt-se__match-wrapper[_ngcontent-%COMP%]:after{display:flex;flex-grow:1;box-sizing:border-box!important}.ngtt-se__match-wrapper[_ngcontent-%COMP%]:after{right:0;position:absolute;width:25px;height:50%;border-right:2px solid #daa520;content:""}.ngtt-se__match-wrapper[_ngcontent-%COMP%]:before{display:flex;flex-grow:1;left:0;top:50%;position:absolute;width:25px;border-top:2px solid #daa520;content:"";box-sizing:border-box!important}.ngtt-se__match-wrapper[_ngcontent-%COMP%]:nth-child(odd):after{top:50%;border-top-right-radius:0;border-top:2px solid #daa520}.ngtt-se__match-wrapper[_ngcontent-%COMP%]:nth-child(2n):after{top:0;border-bottom-right-radius:0;border-bottom:2px solid #daa520}.ngtt-se__match-wrapper[_ngcontent-%COMP%]:first-child:last-child:after, .ngtt-se__round-wrapper[_ngcontent-%COMP%]:first-child > .ngtt-se__match-wrapper[_ngcontent-%COMP%]:before{display:none}.ngtt-se__finale-match-wrapper[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-direction:column;align-items:flex-start;height:130px;width:400px;padding:15px 25px;position:relative;box-sizing:border-box!important}.ngtt-se__finale-match-wrapper[_ngcontent-%COMP%] > .ngtt-se__finale-component-container[_ngcontent-%COMP%]{display:block;height:100px;width:350px;background-color:initial;margin-bottom:30px}.ngtt-se__finale-match-wrapper[_ngcontent-%COMP%]:before{display:flex;flex-grow:1;left:0;top:50%;position:absolute;width:25px;border-top:2px solid #daa520;content:""}a[_ngcontent-%COMP%], abbr[_ngcontent-%COMP%], acronym[_ngcontent-%COMP%], address[_ngcontent-%COMP%], applet[_ngcontent-%COMP%], article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], audio[_ngcontent-%COMP%], b[_ngcontent-%COMP%], big[_ngcontent-%COMP%], blockquote[_ngcontent-%COMP%], body[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], caption[_ngcontent-%COMP%], center[_ngcontent-%COMP%], cite[_ngcontent-%COMP%], code[_ngcontent-%COMP%], dd[_ngcontent-%COMP%], del[_ngcontent-%COMP%], details[_ngcontent-%COMP%], dfn[_ngcontent-%COMP%], div[_ngcontent-%COMP%], dl[_ngcontent-%COMP%], dt[_ngcontent-%COMP%], em[_ngcontent-%COMP%], embed[_ngcontent-%COMP%], fieldset[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], form[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], html[_ngcontent-%COMP%], i[_ngcontent-%COMP%], iframe[_ngcontent-%COMP%], img[_ngcontent-%COMP%], ins[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], label[_ngcontent-%COMP%], legend[_ngcontent-%COMP%], li[_ngcontent-%COMP%], mark[_ngcontent-%COMP%], menu[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], object[_ngcontent-%COMP%], ol[_ngcontent-%COMP%], output[_ngcontent-%COMP%], p[_ngcontent-%COMP%], pre[_ngcontent-%COMP%], q[_ngcontent-%COMP%], ruby[_ngcontent-%COMP%], s[_ngcontent-%COMP%], samp[_ngcontent-%COMP%], section[_ngcontent-%COMP%], small[_ngcontent-%COMP%], span[_ngcontent-%COMP%], strike[_ngcontent-%COMP%], strong[_ngcontent-%COMP%], sub[_ngcontent-%COMP%], summary[_ngcontent-%COMP%], sup[_ngcontent-%COMP%], table[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tfoot[_ngcontent-%COMP%], th[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], time[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], tt[_ngcontent-%COMP%], u[_ngcontent-%COMP%], ul[_ngcontent-%COMP%], var[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:initial}article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], details[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], menu[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], section[_ngcontent-%COMP%]{display:block}body[_ngcontent-%COMP%]{line-height:1}ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{list-style:none}blockquote[_ngcontent-%COMP%], q[_ngcontent-%COMP%]{quotes:none}blockquote[_ngcontent-%COMP%]:after, blockquote[_ngcontent-%COMP%]:before, q[_ngcontent-%COMP%]:after, q[_ngcontent-%COMP%]:before{content:"";content:none}table[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0}.ngtt-de__container[_ngcontent-%COMP%]{background-color:#2b3e50;display:inline-block;box-sizing:border-box}.ngtt-de__match-component-container[_ngcontent-%COMP%]{display:flex;height:100px;width:350px;background-color:initial;box-sizing:border-box!important}.ngtt-de__winners-match-wrapper[_ngcontent-%COMP%]{display:flex;flex-grow:1;align-items:center;height:130px;width:400px;padding:15px 25px;position:relative;box-sizing:border-box!important}.ngtt-de__winners-match-wrapper[_ngcontent-%COMP%]:after{right:0;height:50%;border-right:2px solid #daa520}.ngtt-de__winners-match-wrapper[_ngcontent-%COMP%]:after, .ngtt-de__winners-match-wrapper[_ngcontent-%COMP%]:before{display:flex;flex-grow:1;position:absolute;width:25px;content:"";box-sizing:border-box!important}.ngtt-de__winners-match-wrapper[_ngcontent-%COMP%]:before{left:0;top:50%;border-top:2px solid #daa520}.ngtt-de__winners-match-wrapper[_ngcontent-%COMP%]:nth-child(odd):after{top:50%;border-top-right-radius:0;border-top:2px solid #daa520}.ngtt-de__winners-match-wrapper[_ngcontent-%COMP%]:nth-child(2n):after{top:0;border-bottom-right-radius:0;border-bottom:2px solid #daa520}.ngtt-de__winners-match-wrapper[_ngcontent-%COMP%]:first-child:last-child:after{border-right:none;border-radius:0;width:23px}.ngtt-de__winners-round-wrapper[_ngcontent-%COMP%]:not(:first-child):not(:nth-child(2)):not(:last-child) > .ngtt-de__winners-match-wrapper[_ngcontent-%COMP%]:before{width:425px;left:-400px}.ngtt-de__winners-round-wrapper[_ngcontent-%COMP%]:first-child > .ngtt-de__winners-match-wrapper[_ngcontent-%COMP%]:before{display:none}.ngtt-de__finale-match-wrapper[_ngcontent-%COMP%]{display:flex;flex-grow:1;align-items:flex-end;height:100px;width:350px;padding:15px 25px;position:relative;box-sizing:border-box!important}.ngtt-de__finale-match-wrapper[_ngcontent-%COMP%]:before{left:0;width:25px;bottom:65px;border-left:2px solid #daa520;border-bottom:2px solid #daa520}.ngtt-de__finale-match-wrapper[_ngcontent-%COMP%]:after, .ngtt-de__finale-match-wrapper[_ngcontent-%COMP%]:before{box-sizing:border-box!important;display:flex;flex-grow:1;top:50%;position:absolute;content:""}.ngtt-de__finale-match-wrapper[_ngcontent-%COMP%]:after{left:-425px;height:2%;width:427px;border-right:2px solid #daa520;border-top:2px solid #daa520;border-top-right-radius:0}.ngtt-de__winners-bracket-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;box-sizing:border-box!important}.ngtt-de__winners-round-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;box-sizing:border-box!important;min-width:800px}.ngtt-de__winners-round-wrapper[_ngcontent-%COMP%]:first-child{min-width:400px}.ngtt-de__winners-round-wrapper[_ngcontent-%COMP%]:last-child{justify-content:flex-end}.ngtt-de__losers-bracket-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;box-sizing:border-box!important}.ngtt-de__losers-round-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;width:400px;padding-top:50px;box-sizing:border-box!important}.ngtt-de__losers-round-wrapper[_ngcontent-%COMP%]:first-child{margin-left:400px}.ngtt-de__losers-match-wrapper[_ngcontent-%COMP%]{display:flex;flex-grow:1;align-items:center;height:130px;width:400px;padding:15px 25px;position:relative;box-sizing:border-box!important}.ngtt-de__losers-match-wrapper[_ngcontent-%COMP%]:after{right:0;width:25px;height:50%}.ngtt-de__losers-match-wrapper[_ngcontent-%COMP%]:after, .ngtt-de__losers-match-wrapper[_ngcontent-%COMP%]:before{display:flex;flex-grow:1;position:absolute;content:"";box-sizing:border-box!important}.ngtt-de__losers-match-wrapper[_ngcontent-%COMP%]:before{left:-2px;top:50%;width:27px;border-top:2px solid #daa520}.ngtt-de__losers-round-wrapper[_ngcontent-%COMP%]:nth-child(2n):not(:last-child) > .ngtt-de__losers-match-wrapper[_ngcontent-%COMP%]:nth-child(odd):after{top:50%;width:25px;border-top-right-radius:0;border-top:2px solid #daa520;border-right:2px solid #daa520}.ngtt-de__losers-round-wrapper[_ngcontent-%COMP%]:nth-child(2n):not(:last-child) > .ngtt-de__losers-match-wrapper[_ngcontent-%COMP%]:nth-child(2n):after{top:1px;width:25px;border-bottom-right-radius:0;border-bottom:2px solid #daa520;border-right:2px solid #daa520}.ngtt-de__losers-round-wrapper[_ngcontent-%COMP%]:nth-child(odd):not(:last-child) > .ngtt-de__losers-match-wrapper[_ngcontent-%COMP%]:nth-child(odd):after{top:50%;border-top-right-radius:0;border-top:2px solid #daa520}.ngtt-de__losers-round-wrapper[_ngcontent-%COMP%]:nth-child(odd):not(:last-child) > .ngtt-de__losers-match-wrapper[_ngcontent-%COMP%]:nth-child(2n):after{top:2px;border-bottom-right-radius:0;border-bottom:2px solid #daa520}.ngtt-de__losers-round-wrapper[_ngcontent-%COMP%]:first-child > .ngtt-de__losers-match-wrapper[_ngcontent-%COMP%]:before{display:none}.ngtt-de__losers-round-wrapper[_ngcontent-%COMP%]:last-child > .ngtt-de__losers-match-wrapper[_ngcontent-%COMP%]:after{right:-2px;height:100%;width:27px;top:-50%;border-top:none;border-bottom:2px solid #daa520;border-right:2px solid #daa520;border-top-right-radius:0;border-bottom-right-radius:0;box-sizing:border-box!important}.ngtt__match-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:310px;height:100px;background-color:#466582;border-radius:6px}.ngtt__team-wrapper[_ngcontent-%COMP%]{display:flex;width:95%;height:26px!important;flex-direction:row;padding:12px 6px;align-items:center}.ngtt__team-title[_ngcontent-%COMP%]{background-color:#fff;margin-left:12px;color:#000;display:inline-block;flex-grow:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.mat-winner[_ngcontent-%COMP%]{background-color:#0d980d;color:#fff}.mat-looser[_ngcontent-%COMP%]{background-color:red;color:#fff}.mat-undefined[_ngcontent-%COMP%]{background-color:#fff;color:#000}.clickable[_ngcontent-%COMP%]{cursor:pointer}#finale[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:2%}#yellow[_ngcontent-%COMP%]{color:#ff0}#silver[_ngcontent-%COMP%]{color:#d9d9d9}#bronze[_ngcontent-%COMP%]{color:#ff7918}#white[_ngcontent-%COMP%]{color:#fff}span.handicap[_ngcontent-%COMP%]{color:#fff;position:absolute;right:7px}']});class Dt{constructor(t,e,n,c,i){this.tournoiService=t,this.route=e,this.dialog=n,this.snackBar=c,this.notifyService=i,this.tableau={_id:null,nom:null,poules:null,format:null,consolante:null,maxNumberPlayers:null,age_minimum:null,is_launched:null,nbPoules:null,handicap:null}}ngOnInit(){this.route.params.subscribe(t=>{this.spinnerShown=!1,this.idTableau=t.tableau,this.getBracket()})}generateBracket(){this.dialog.open($.a,{width:"45%",data:{id:"true",action:"R\xe9g\xe9n\xe9rer le tableau ?",option:null,action_button_text:"R\xe9g\xe9n\xe9rer"}}).afterClosed().subscribe(t=>{t&&(this.spinnerShown=!0,this.tournoiService.generateBracket(this.tableau._id,this.tableau.format,this.phase,this.tableau.poules,this.tableau.maxNumberPlayers).subscribe(()=>this.getBracket(),t=>{this.spinnerShown=!1,this.bracket=null,this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")}))})}getBracket(){this.tournoiService.getBracket(this.idTableau,this.phase).subscribe(t=>{this.bracket=t,this.spinnerShown=!1},t=>this.notifyService.notifyUser(t.error,this.snackBar,"error","OK"))}}function At(t,e){1&t&&(c.kc(0,"mat-card"),c.kc(1,"h2",3),c.Wc(2,"Il n'y a pas de joueurs inscrits pour le moment"),c.jc(),c.jc())}function Wt(t,e){1&t&&c.fc(0,"div",20)}Dt.\u0275fac=function(t){return new(t||Dt)(c.ec(ft.a),c.ec(o.a),c.ec(K.b),c.ec(d.a),c.ec(b.a))},Dt.\u0275cmp=c.Yb({type:Dt,selectors:[["app-bracket"]],inputs:{phase:"phase",tableau:"tableau"},decls:4,vars:2,consts:[["class","container",4,"ngIf"],[4,"ngIf"],["matchTemplate",""],[1,"container"],["mat-raised-button","","color","primary",1,"center","btnGenerateBracket",3,"disabled","click"],["color","warn",3,"diameter"],[1,"center"],[3,"tournament","matchTemplate",4,"ngIf"],[3,"tournament","matchTemplate"],[3,"tableau","phase","match","updateBracket"]],template:function(t,e){1&t&&(c.Uc(0,Mt,5,3,"div",0),c.Uc(1,Lt,2,1,"ng-container",1),c.Uc(2,It,1,3,"ng-template",null,2,c.Vc)),2&t&&(c.Cc("ngIf",e.tableau),c.Sb(1),c.Cc("ngIf",e.bracket))},directives:[h.l,g.a,f.a,U.b,j.a,L.b,St],styles:[".btnGenerateBracket[_ngcontent-%COMP%]{margin-top:16px}  .mat-tab-group-dynamic-height .mat-tab-body-content{overflow-x:auto!important}mat-card[_ngcontent-%COMP%]{background-color:#dbf1ff}"]});const Bt=function(t,e){return[t,e]};function $t(t,e){if(1&t){const t=c.lc();c.kc(0,"div",18),c.sc("dblclick",function(){c.Kc(t);const n=e.$implicit,i=c.wc(2).$implicit;return c.wc(2).unsubscribeDblClick(i._id,n._id)}),c.Uc(1,Wt,1,0,"div",19),c.Wc(2),c.jc()}if(2&t){const t=e.$implicit,n=c.wc(2).$implicit,i=c.wc(2);c.Cc("cdkDragData",c.Fc(4,Bt,t._id,n._id))("cdkDragDisabled",n.locked||0!==i.tableau.is_launched),c.Sb(2),c.Zc(" ",t.nom," - ",t.classement," points ")}}function Tt(t,e){1&t&&(c.kc(0,"p",21),c.Wc(1,"Bin\xf4me inqualifiable car incomplet"),c.jc())}function Ft(t,e){if(1&t){const t=c.lc();c.kc(0,"mat-card"),c.kc(1,"h3",12),c.Wc(2),c.jc(),c.kc(3,"div",13),c.sc("cdkDropListDropped",function(e){c.Kc(t);const n=c.wc().$implicit;return c.wc(2).editBinome(e,n._id)}),c.Uc(4,$t,3,7,"div",16),c.jc(),c.Uc(5,Tt,2,0,"p",17),c.jc()}if(2&t){const t=c.wc(),e=t.$implicit,n=t.index,i=c.wc(2);c.Ub("mat-elevation-z8 "+(e.locked?"locked":"")),c.Sb(2),c.Yc("Bin\xf4me n\xb0",n+1,""),c.Sb(1),c.Cc("cdkDropListData",i.binomes[n].joueurs),c.Sb(1),c.Cc("ngForOf",i.binomes[n].joueurs),c.Sb(1),c.Cc("ngIf",1===e.joueurs.length)}}function Rt(t,e){if(1&t&&(c.kc(0,"div"),c.Uc(1,Ft,6,6,"mat-card",15),c.jc()),2&t){const t=e.even;c.Sb(1),c.Cc("ngIf",t)}}function Kt(t,e){1&t&&(c.kc(0,"span"),c.Wc(1,"s"),c.jc())}function zt(t,e){1&t&&(c.kc(0,"span"),c.Wc(1,"s"),c.jc())}function Ht(t,e){1&t&&c.fc(0,"div",20)}const Nt=function(t){return[t,null]};function Jt(t,e){if(1&t&&(c.kc(0,"div",22),c.Uc(1,Ht,1,0,"div",19),c.Wc(2),c.jc()),2&t){const t=e.$implicit,n=c.wc(2);c.Cc("cdkDragDisabled",0!==n.tableau.is_launched)("cdkDragData",c.Ec(4,Nt,t._id)),c.Sb(2),c.Zc(" ",t.nom," - ",t.classement," points ")}}function Yt(t,e){1&t&&c.fc(0,"div",20)}function Et(t,e){if(1&t){const t=c.lc();c.kc(0,"div",18),c.sc("dblclick",function(){c.Kc(t);const n=e.$implicit,i=c.wc(2).$implicit;return c.wc(2).unsubscribeDblClick(i._id,n._id)}),c.Uc(1,Yt,1,0,"div",19),c.Wc(2),c.jc()}if(2&t){const t=e.$implicit,n=c.wc(2).$implicit,i=c.wc(2);c.Cc("cdkDragData",c.Fc(4,Bt,t._id,n._id))("cdkDragDisabled",n.locked||0!==i.tableau.is_launched),c.Sb(2),c.Zc(" ",t.nom," - ",t.classement," points ")}}function Xt(t,e){1&t&&(c.kc(0,"p",21),c.Wc(1,"Bin\xf4me inqualifiable car unique joueur"),c.jc())}function Gt(t,e){if(1&t){const t=c.lc();c.kc(0,"mat-card"),c.kc(1,"h3",12),c.Wc(2),c.jc(),c.kc(3,"div",13),c.sc("cdkDropListDropped",function(e){c.Kc(t);const n=c.wc().$implicit;return c.wc(2).editBinome(e,n._id)}),c.Uc(4,Et,3,7,"div",16),c.jc(),c.Uc(5,Xt,2,0,"p",17),c.jc()}if(2&t){const t=c.wc(),e=t.$implicit,n=t.index,i=c.wc(2);c.Ub("mat-elevation-z8 "+(e.locked?"locked":"")),c.Sb(2),c.Yc("Bin\xf4me n\xb0",n+1,""),c.Sb(1),c.Cc("cdkDropListData",i.binomes[n].joueurs),c.Sb(1),c.Cc("ngForOf",i.binomes[n].joueurs),c.Sb(1),c.Cc("ngIf",1===e.joueurs.length)}}function qt(t,e){if(1&t&&(c.kc(0,"div"),c.Uc(1,Gt,6,6,"mat-card",15),c.jc()),2&t){const t=e.odd;c.Sb(1),c.Cc("ngIf",t)}}function Vt(t,e){if(1&t){const t=c.lc();c.kc(0,"div",4),c.sc("scroll",function(){c.Kc(t);return c.wc().onScrollEvent()},!1,c.Jc),c.kc(1,"div",5),c.kc(2,"div",6),c.kc(3,"div",7),c.Uc(4,Rt,2,1,"div",8),c.jc(),c.jc(),c.kc(5,"div",9),c.kc(6,"div",10),c.kc(7,"mat-card"),c.kc(8,"h1",11),c.Wc(9,"Joueurs inscrits"),c.jc(),c.kc(10,"h2",12),c.Wc(11),c.Uc(12,Kt,2,0,"span",1),c.Wc(13),c.Uc(14,zt,2,0,"span",1),c.Wc(15,")"),c.jc(),c.kc(16,"div",13),c.sc("cdkDropListDropped",function(e){c.Kc(t);return c.wc().editBinome(e,null)}),c.Uc(17,Jt,3,6,"div",14),c.jc(),c.jc(),c.jc(),c.jc(),c.kc(18,"div",6),c.kc(19,"div",7),c.Uc(20,qt,2,1,"div",8),c.jc(),c.jc(),c.jc(),c.jc()}if(2&t){const t=c.wc();c.Sb(4),c.Cc("ngForOf",t.binomes),c.Sb(7),c.Yc("(",t.nbPlayers()," assign\xe9"),c.Sb(1),c.Cc("ngIf",t.nbPlayers()>1),c.Sb(1),c.Yc(") - (",t.subscribedUnassignedPlayers.length," disponible"),c.Sb(1),c.Cc("ngIf",t.subscribedUnassignedPlayers.length>1),c.Sb(2),c.Cc("cdkDropListData",t.subscribedUnassignedPlayers),c.Sb(1),c.Cc("ngForOf",t.subscribedUnassignedPlayers),c.Sb(3),c.Cc("ngForOf",t.binomes)}}class Zt{constructor(t,e,n,i,a,o){this.binomeService=t,this.router=e,this.route=n,this.snackBar=i,this.notifyService=a,this.gestionService=o,this.binomes=[],this.subscribedUnassignedPlayers=[],this.tableau={format:null,_id:null,poules:null,nom:null,is_launched:null,consolante:null,maxNumberPlayers:null,age_minimum:null,nbPoules:null,handicap:null},this.generatePoules=new c.u,this.getAllBinomes=new c.u,this.getSubscribedUnassignedPlayers=new c.u}onScrollEvent(){const t=document.getElementById("listPlayers");t&&(window.scrollY>=173?(t.classList.remove("absolutePos"),t.classList.add("stickyPos")):(t.classList.add("absolutePos"),t.classList.remove("stickyPos")))}ngOnInit(){this.route.paramMap.subscribe(()=>{this.getTableau(),this.tableauxEditionSubscription=this.gestionService.tableauxEditSource.subscribe(t=>{this.tableau=t})})}ngOnDestroy(){this.tableauxEditionSubscription.unsubscribe()}getTableau(){this.gestionService.getTableau(this.router.url.split("/").pop()).subscribe(t=>{this.tableau=t,this.getAllBinomes.emit(),"double"===this.tableau.format&&this.getSubscribedUnassignedPlayers.emit()})}editBinome(t,e){t.previousContainer===t.container?Object(M.f)(t.container.data,t.previousIndex,t.currentIndex):t.container.data.length<this.tableau.maxNumberPlayers||null===e?(Object(M.g)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex),this.binomeService.editBinome(t.item.data[1],e,t.container.data,t.item.data[0]).subscribe(()=>{this.tableau.poules&&0===this.tableau.is_launched&&this.generatePoules.emit()},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})):this.notifyService.notifyUser("Le bin\xf4me est complet",this.snackBar,"error","OK")}unsubscribeDblClick(t,e){this.binomeService.removePlayer(t,e).subscribe(()=>{this.getAllBinomes.emit(),this.tableau.poules&&0===this.tableau.is_launched&&this.generatePoules.emit(),this.getSubscribedUnassignedPlayers.emit()},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}nbPlayers(){return this.binomes.length>0?this.binomes.map(t=>t.joueurs.length).reduce((t,e)=>t+e):0}}function Qt(t,e){if(1&t&&c.fc(0,"p",6),2&t){const t=e.$implicit;c.Cc("outerHTML",t,c.Lc)}}function te(t,e){if(1&t&&(c.kc(0,"div",4),c.Uc(1,Qt,1,1,"p",5),c.jc()),2&t){const t=c.wc();c.Sb(1),c.Cc("ngForOf",t.showHandicap())}}Zt.\u0275fac=function(t){return new(t||Zt)(c.ec(F.a),c.ec(o.c),c.ec(o.a),c.ec(d.a),c.ec(b.a),c.ec(u.a))},Zt.\u0275cmp=c.Yb({type:Zt,selectors:[["app-binome"]],inputs:{binomes:"binomes",subscribedUnassignedPlayers:"subscribedUnassignedPlayers"},outputs:{generatePoules:"generatePoules",getAllBinomes:"getAllBinomes",getSubscribedUnassignedPlayers:"getSubscribedUnassignedPlayers"},decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],["fxLayout","column","cdkDropListGroup","",3,"scroll",4,"ngIf"],[1,"center","lobster"],["fxLayout","column","cdkDropListGroup","",3,"scroll"],["fxLayout","row nowrap","fxFlexFill","","fxLayoutAlign","space-between stretch"],["fxFlex","33%","fxLayoutAlign","center stretch"],[1,"listBinomes"],[4,"ngFor","ngForOf"],["fxFlex","33%","fxLayoutAlign","center stretch","id","listPlayers",1,"absolutePos"],[1,"listPlayers"],[1,"lobster","center","labelJoueursInscrits"],[1,"lobster","center"],["cdkDropList","","cdkDropListSortingDisabled","",1,"list",3,"cdkDropListData","cdkDropListDropped"],["class","box center","cdkDrag","",3,"cdkDragDisabled","cdkDragData",4,"ngFor","ngForOf"],[3,"class",4,"ngIf"],["class","box center","cdkDrag","",3,"cdkDragData","cdkDragDisabled","dblclick",4,"ngFor","ngForOf"],["class","center error_message",4,"ngIf"],["cdkDrag","",1,"box","center",3,"cdkDragData","cdkDragDisabled","dblclick"],["class","custom-placeholder",4,"cdkDragPlaceholder"],[1,"custom-placeholder"],[1,"center","error_message"],["cdkDrag","",1,"box","center",3,"cdkDragDisabled","cdkDragData"]],template:function(t,e){1&t&&(c.kc(0,"div",0),c.Uc(1,At,3,0,"mat-card",1),c.Uc(2,Vt,21,8,"div",2),c.jc()),2&t&&(c.Sb(1),c.Cc("ngIf",!e.binomes.length&&!e.subscribedUnassignedPlayers.length),c.Sb(1),c.Cc("ngIf",e.binomes.length||e.subscribedUnassignedPlayers.length))},directives:[h.l,j.a,J.c,M.d,J.d,J.b,J.a,h.k,M.c,M.a,M.b],styles:[".mat-card[_ngcontent-%COMP%]{margin:3%}.listBinomes[_ngcontent-%COMP%]{width:100%}.listPlayers[_ngcontent-%COMP%]{width:91%}.labelJoueursInscrits[_ngcontent-%COMP%]{margin-bottom:0}.list[_ngcontent-%COMP%]{width:500px;max-width:100%;border:1px solid #ccc;min-height:60px;display:block;border-radius:4px;overflow:hidden}.box[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]{background:#fff}.box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.box[_ngcontent-%COMP%]:last-child{border:none}.list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.box.cdk-drag-disabled[_ngcontent-%COMP%]{background:#fff;border-color:#fff;cursor:default}.custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:3px dotted #999;min-height:60px;transition:transform .25s cubic-bezier(0,0,.2,1)}.locked[_ngcontent-%COMP%]{background-color:#238c23}.locked[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff}p.error_message[_ngcontent-%COMP%]{background-color:#ff5e21;color:#fff;border-radius:10px;margin-bottom:0;margin-top:10px;width:auto}#listPlayers[_ngcontent-%COMP%]{left:33.5%;overflow-y:scroll;width:80%!important;z-index:1}.absolutePos[_ngcontent-%COMP%]{position:absolute;top:19px;height:470px}.stickyPos[_ngcontent-%COMP%]{position:fixed;top:9%;height:90%}[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;background:transparent}  .mat-tab-body-wrapper{min-height:600px}"]});class ee{constructor(t,e,n){this.data=t,this.dialogRef=e,this.handicapService=n,this.listeJoueurs=null,this.listeJoueurs=t.listeJoueurs}ngOnInit(){}showHandicap(){const t=[];return this.listeJoueurs.forEach(e=>{this.listeJoueurs.forEach(n=>{e._id!==n._id&&0===t.filter(t=>{const c=new RegExp(".*"+n.nom+".*"+e.nom+".*");return t.match(c)}).length&&t.push(e.nom+" "+e.classement+" pts <b>"+this.handicapService.calculHandicap(JSON.parse(JSON.stringify(e.classement)),JSON.parse(JSON.stringify(n.classement)))[0]+"</b> vs <b>"+this.handicapService.calculHandicap(JSON.parse(JSON.stringify(e.classement)),JSON.parse(JSON.stringify(n.classement)))[1]+"</b>  "+n.classement+" pts "+n.nom+"<br>")})}),t}close(){this.dialogRef.close()}}function ne(t,e){1&t&&(c.kc(0,"mat-card"),c.kc(1,"h2",4),c.Wc(2,"Il n'y a pas de joueurs inscrits pour le moment"),c.jc(),c.jc())}function ce(t,e){1&t&&(c.kc(0,"mat-icon",13),c.Wc(1,"check_circle"),c.jc())}function ie(t,e){if(1&t){const t=c.lc();c.kc(0,"button",14),c.sc("click",function(){c.Kc(t);const e=c.wc().index,n=c.wc();return n.openMatchesHandicap(n.poules[e].participants)}),c.kc(1,"mat-icon"),c.Wc(2,"format_list_numbered"),c.jc(),c.jc()}}ee.\u0275fac=function(t){return new(t||ee)(c.ec(K.a),c.ec(K.g),c.ec(mt))},ee.\u0275cmp=c.Yb({type:ee,selectors:[["app-handicap"]],decls:6,vars:1,consts:[[1,"lobster","center"],["class","center",4,"ngIf"],["mat-dialog-actions","",1,"center"],["mat-button","","color","primary",3,"click"],[1,"center"],[3,"outerHTML",4,"ngFor","ngForOf"],[3,"outerHTML"]],template:function(t,e){1&t&&(c.kc(0,"h2",0),c.Wc(1,"Handicap"),c.jc(),c.Uc(2,te,2,1,"div",1),c.kc(3,"div",2),c.kc(4,"button",3),c.sc("click",function(){return e.close()}),c.Wc(5,"OK"),c.jc(),c.jc()),2&t&&(c.Sb(2),c.Cc("ngIf",e.listeJoueurs))},directives:[h.l,g.a,h.k],styles:["button[_ngcontent-%COMP%]{margin-top:16px}"]});const ae=function(t,e){return[t,e]},oe=function(t){return{tight:t}};function re(t,e){if(1&t&&(c.kc(0,"div",15),c.fc(1,"span",16),c.jc()),2&t){const t=e.$implicit,n=c.wc(),i=n.$implicit,a=n.index,o=c.wc();c.Cc("cdkDragData",c.Fc(4,ae,i._id,t._id))("cdkDragDisabled",i.locked)("ngClass",c.Ec(7,oe,"Binomes"===o.poules[a].objectRef)),c.Sb(1),c.Cc("outerHTML",o.showParticipant(o.poules[a].objectRef,t),c.Lc)}}function se(t,e){if(1&t){const t=c.lc();c.kc(0,"div",5),c.kc(1,"mat-card",6),c.kc(2,"div"),c.fc(3,"p"),c.kc(4,"h2",7),c.Uc(5,ce,2,0,"mat-icon",8),c.Wc(6),c.jc(),c.Uc(7,ie,3,0,"button",9),c.jc(),c.kc(8,"div",10),c.sc("cdkDropListDropped",function(n){c.Kc(t);const i=e.$implicit;return c.wc().editPoule(n,i._id)}),c.Uc(9,re,2,9,"div",11),c.jc(),c.kc(10,"button",12),c.sc("click",function(){c.Kc(t);const n=e.$implicit;return c.wc().setStatus(n)}),c.Wc(11),c.jc(),c.jc(),c.jc()}if(2&t){const t=e.$implicit,n=e.index,i=c.wc();c.Cc("fxFlex",i.tableau.nbPoules>2?"33%":"50%"),c.Sb(2),c.Qc(i.tableau.handicap?"display: flex; justify-content: space-between;":""),c.Sb(3),c.Cc("ngIf",t.locked),c.Sb(1),c.Yc(" Poule n\xb0",n+1," "),c.Sb(1),c.Cc("ngIf",i.tableau.handicap&&i.poules[n].participants.length>1),c.Sb(1),c.Cc("cdkDropListData",i.poules[n].participants),c.Sb(1),c.Cc("ngForOf",i.poules[n].participants),c.Sb(1),c.Cc("disabled",2===i.tableau.is_launched),c.Sb(1),c.Xc(t.locked?"Modifier":"Valider")}}class le{constructor(t,e,n,i,a,o,r){this.pouleService=t,this.router=e,this.route=n,this.snackBar=i,this.gestionService=a,this.notifyService=o,this.dialog=r,this.poules=[],this.tableau={format:null,_id:null,poules:null,nom:null,is_launched:null,consolante:null,maxNumberPlayers:null,age_minimum:null,nbPoules:null,handicap:null},this.getAllPoules=new c.u}ngOnInit(){this.route.paramMap.subscribe(()=>{this.getTableau(),this.tableauxEditionSubscription=this.gestionService.tableauxEditSource.subscribe(t=>{this.tableau=t,2===this.tableau.is_launched&&(this.poules=this.poules.map(t=>(t.locked=!0,t)))})})}ngOnDestroy(){this.tableauxEditionSubscription.unsubscribe()}getTableau(){this.gestionService.getTableau(this.router.url.split("/").pop()).subscribe(t=>{this.tableau=t,this.getAllPoules.emit()})}editPoule(t,e){Object(M.f)(t.container.data,t.previousIndex,t.currentIndex),this.pouleService.editPoule(e,t.container.data).subscribe(()=>{},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}setStatus(t){this.pouleService.setStatus(t).subscribe(()=>this.getAllPoules.emit(),t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}showParticipant(t,e){return"Joueurs"===t?e.nom+" - "+e.classement+" points":"Binomes"===t?e.joueurs.map((t,e)=>(e>0?"<br>":"")+t.nom).join(""):void 0}openMatchesHandicap(t){this.dialog.open(ee,{width:"50%",data:{listeJoueurs:t}})}}function ue(t,e){if(1&t&&(c.kc(0,"span"),c.Wc(1),c.jc()),2&t){const t=c.wc();c.Sb(1),c.Yc("-",t.tableau.age_minimum," ans")}}function de(t,e){if(1&t){const t=c.lc();c.kc(0,"button",6),c.sc("click",function(){c.Kc(t);return c.wc().changeStateTableau()}),c.Wc(1),c.jc()}if(2&t){const t=c.wc();c.Sb(1),c.Yc("Lancer les ",t.tableau.poules?"poules":"phases finales","")}}function be(t,e){if(1&t){const t=c.lc();c.kc(0,"button",7),c.sc("click",function(){c.Kc(t);return c.wc().changeStateTableau()}),c.Wc(1,"Terminer le tableau"),c.jc()}}function pe(t,e){1&t&&c.Wc(0,"Participants")}function he(t,e){1&t&&c.Wc(0,"Bin\xf4mes")}function ge(t,e){if(1&t){const t=c.lc();c.kc(0,"mat-tab"),c.Uc(1,he,1,0,"ng-template",9),c.kc(2,"app-binome",12),c.sc("getSubscribedUnassignedPlayers",function(){c.Kc(t);return c.wc(2).getSubscribedUnassignedPlayers()})("getAllBinomes",function(){c.Kc(t);return c.wc(2).getAllBinomes()})("generatePoules",function(){c.Kc(t);return c.wc(2).generatePoules()}),c.jc(),c.jc()}if(2&t){const t=c.wc(2);c.Sb(2),c.Cc("binomes",t.binomes)("subscribedUnassignedPlayers",t.subscribedUnassignedPlayers)}}function fe(t,e){1&t&&c.Wc(0,"Poules")}function me(t,e){if(1&t){const t=c.lc();c.kc(0,"mat-tab"),c.Uc(1,fe,1,0,"ng-template",9),c.kc(2,"app-poule",13),c.sc("getAllPoules",function(){c.Kc(t);return c.wc(2).getAllPoules()}),c.jc(),c.jc()}if(2&t){const t=c.wc(2);c.Sb(2),c.Cc("poules",t.poules)}}function _e(t,e){1&t&&c.Wc(0," Phases finales ")}function ke(t,e){1&t&&c.Wc(0," Consolante ")}function Ce(t,e){if(1&t&&(c.kc(0,"mat-tab"),c.Uc(1,ke,1,0,"ng-template",9),c.fc(2,"app-bracket",11),c.jc()),2&t){const t=c.wc(2);c.Sb(2),c.Cc("phase","consolante")("tableau",t.tableau)}}function Pe(t,e){if(1&t){const t=c.lc();c.kc(0,"mat-tab-group",8),c.kc(1,"mat-tab"),c.Uc(2,pe,1,0,"ng-template",9),c.kc(3,"app-list-players",10),c.sc("generatePoules",function(){c.Kc(t);return c.wc().generatePoules()})("getAllBinomes",function(){c.Kc(t);return c.wc().getAllBinomes()})("getSubscribedUnassignedPlayers",function(){c.Kc(t);return c.wc().getSubscribedUnassignedPlayers()}),c.jc(),c.jc(),c.Uc(4,ge,3,2,"mat-tab",1),c.Uc(5,me,3,1,"mat-tab",1),c.kc(6,"mat-tab"),c.Uc(7,_e,1,0,"ng-template",9),c.fc(8,"app-bracket",11),c.jc(),c.Uc(9,Ce,3,2,"mat-tab",1),c.jc()}if(2&t){const t=c.wc();c.Sb(4),c.Cc("ngIf","double"===t.tableau.format),c.Sb(1),c.Cc("ngIf",t.tableau.poules),c.Sb(3),c.Cc("phase","finale")("tableau",t.tableau),c.Sb(1),c.Cc("ngIf",t.tableau.consolante)}}le.\u0275fac=function(t){return new(t||le)(c.ec(T.a),c.ec(o.c),c.ec(o.a),c.ec(d.a),c.ec(u.a),c.ec(b.a),c.ec(K.b))},le.\u0275cmp=c.Yb({type:le,selectors:[["app-poule"]],inputs:{poules:"poules"},outputs:{getAllPoules:"getAllPoules"},decls:4,vars:2,consts:[[1,"container"],[4,"ngIf"],["fxLayout","row wrap"],[3,"fxFlex",4,"ngFor","ngForOf"],[1,"center","lobster"],[3,"fxFlex"],[1,"mat-elevation-z8"],[1,"lobster","center"],["class","locked",4,"ngIf"],["title","Fiche des handicaps","class","btn-handicap","color","primary","mat-icon-button","",3,"click",4,"ngIf"],["cdkDropList","",1,"list",3,"cdkDropListData","cdkDropListDropped"],["class","box center","cdkDrag","",3,"cdkDragData","cdkDragDisabled","ngClass",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"center","btnSetLockedPoule",3,"disabled","click"],[1,"locked"],["title","Fiche des handicaps","color","primary","mat-icon-button","",1,"btn-handicap",3,"click"],["cdkDrag","",1,"box","center",3,"cdkDragData","cdkDragDisabled","ngClass"],[3,"outerHTML"]],template:function(t,e){1&t&&(c.kc(0,"div",0),c.Uc(1,ne,3,0,"mat-card",1),c.kc(2,"div",2),c.Uc(3,se,12,10,"div",3),c.jc(),c.jc()),2&t&&(c.Sb(1),c.Cc("ngIf",!e.poules.length),c.Sb(2),c.Cc("ngForOf",e.poules))},directives:[h.l,J.c,h.k,j.a,J.a,M.c,g.a,f.a,M.a,h.j,G.a],styles:[".mat-card[_ngcontent-%COMP%]{margin:8px}.mat-unlocked[_ngcontent-%COMP%]{background-color:#2db82d}.mat-locked[_ngcontent-%COMP%]{background-color:#fff;color:#000}button[_ngcontent-%COMP%]{color:#fff}.list[_ngcontent-%COMP%]{width:500px;max-width:100%;border:1px solid #ccc;min-height:60px;display:block;border-radius:4px;overflow:hidden}.box[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]{background:#fff}.box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:1px solid #ccc;color:rgba(0,0,0,.87);display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.box[_ngcontent-%COMP%]:last-child{border:none}.list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.box.cdk-drag-disabled[_ngcontent-%COMP%]{background:#fff;border-color:#fff;cursor:default}.custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:3px dotted #999;min-height:60px;transition:transform .25s cubic-bezier(0,0,.2,1)}.btnSetLockedPoule[_ngcontent-%COMP%]{margin-top:16px}.tight[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px}mat-icon[_ngcontent-%COMP%]{vertical-align:sub}mat-icon.locked[_ngcontent-%COMP%]{color:#238c23}"]});class xe{constructor(t,e,n,c,i,a,o,r,s){this.tableauService=t,this.route=e,this.router=n,this.snackBar=c,this.notifyService=i,this.pouleService=a,this.binomeService=o,this.joueurService=r,this.dialog=s,this.tableau={_id:null,format:null,nom:null,poules:null,is_launched:null,consolante:null,maxNumberPlayers:null,age_minimum:null,nbPoules:null,handicap:null},this.poules=[],this.binomes=[],this.subscribedUnassignedPlayers=[]}ngOnInit(){this.route.params.subscribe(t=>{this.getTableau(t.tableau)})}getTableau(t){this.tableauService.getTableau(t).subscribe(t=>this.tableau=t,t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK"),this.router.navigate(["/error-page"])})}changeStateTableau(){const t={id:"true",action:1===this.tableau.is_launched?"Terminer le tableau ?":"Lancer les "+(this.tableau.poules?"poules":"phases finales")+" ?",option:0===this.tableau.is_launched?"Aucun joueur ne pourra plus s'inscrire ni se d\xe9sinscrire au tableau"+("double"===this.tableau.format?" et les bin\xf4mes seront bloqu\xe9s":""):"Les "+(this.tableau.poules?"poules":"bin\xf4mes")+" et phases finales seront valid\xe9"+(this.tableau.poules?"e":"")+"s et bloqu\xe9"+(this.tableau.poules?"e":"")+"s",action_button_text:1===this.tableau.is_launched?"Terminer":"Lancer"};this.dialog.open($.a,{width:"55%",data:t}).afterClosed().subscribe(t=>{t&&(this.tableau.is_launched++,this.tableauService.tableauxEditSource.next(this.tableau),this.tableauService.changeLaunchState(this.tableau).subscribe(()=>{this.tableau.poules&&2===this.tableau.is_launched&&this.pouleService.validateAllPoules(this.tableau._id).subscribe()},t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")}))})}getAllPoules(){this.pouleService.getAll(this.tableau._id,this.tableau.format).subscribe(t=>this.poules=t,t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}generatePoules(){this.pouleService.generatePoules(this.tableau).subscribe(()=>this.getAllPoules(),t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}getAllBinomes(){this.binomeService.getAll(this.tableau._id).subscribe(t=>this.binomes=t,t=>{this.notifyService.notifyUser(t.error,this.snackBar,"error","OK")})}getSubscribedUnassignedPlayers(){this.joueurService.getSubscribedUnassignedDouble(this.tableau._id).subscribe(t=>this.subscribedUnassignedPlayers=t,t=>this.notifyService.notifyUser(t.error,this.snackBar,"error","OK"))}}xe.\u0275fac=function(t){return new(t||xe)(c.ec(u.a),c.ec(o.a),c.ec(o.c),c.ec(d.a),c.ec(b.a),c.ec(T.a),c.ec(F.a),c.ec(R.a),c.ec(K.b))},xe.\u0275cmp=c.Yb({type:xe,selectors:[["app-tableau"]],decls:9,vars:7,consts:[[1,"lobster","center"],[4,"ngIf"],["id","actionButtons"],["mat-raised-button","","id","launchTableau",3,"click",4,"ngIf"],["mat-raised-button","","id","finishTableau",3,"click",4,"ngIf"],["mat-align-tabs","center","color","accent","dynamicHeight","200%","selectedIndex","0",4,"ngIf"],["mat-raised-button","","id","launchTableau",3,"click"],["mat-raised-button","","id","finishTableau",3,"click"],["mat-align-tabs","center","color","accent","dynamicHeight","200%","selectedIndex","0"],["mat-tab-label","","class","mat-tab-label"],[3,"generatePoules","getAllBinomes","getSubscribedUnassignedPlayers"],[3,"phase","tableau"],[3,"binomes","subscribedUnassignedPlayers","getSubscribedUnassignedPlayers","getAllBinomes","generatePoules"],[3,"poules","getAllPoules"]],template:function(t,e){1&t&&(c.kc(0,"h1",0),c.kc(1,"span"),c.Wc(2),c.xc(3,"titlecase"),c.Uc(4,ue,2,1,"span",1),c.jc(),c.jc(),c.kc(5,"div",2),c.Uc(6,de,2,1,"button",3),c.Uc(7,be,2,0,"button",4),c.jc(),c.Uc(8,Pe,10,5,"mat-tab-group",5)),2&t&&(c.Sb(2),c.Yc("",c.yc(3,5,e.tableau.nom)," "),c.Sb(2),c.Cc("ngIf",null!==e.tableau.age_minimum),c.Sb(2),c.Cc("ngIf",0===e.tableau.is_launched),c.Sb(1),c.Cc("ngIf",1===e.tableau.is_launched),c.Sb(1),c.Cc("ngIf",e.tableau._id))},directives:[h.l,g.a,B.b,B.a,B.c,gt,Dt,Zt,le],pipes:[h.t],styles:["h1[_ngcontent-%COMP%]{color:#fff;padding-top:30px;padding-bottom:10px;margin-bottom:8px}.mat-tab-link[_ngcontent-%COMP%],   .mat-tab-label{color:#fff!important}  .mat-tab-body-content{min-height:400px!important}#actionButtons[_ngcontent-%COMP%]{display:flex;justify-content:center}#actionButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;margin:0 5px}#actionButtons[_ngcontent-%COMP%]   button#launchTableau[_ngcontent-%COMP%]{background-color:#009d00}#actionButtons[_ngcontent-%COMP%]   button#finishTableau[_ngcontent-%COMP%]{background-color:#495dce}"]});var ye=n("5nbR");const ve=[{path:"tableau/:tableau",component:xe,canActivate:[ye.a]}];class we{}we.\u0275mod=c.cc({type:we}),we.\u0275inj=c.bc({factory:function(t){return new(t||we)},imports:[[o.f.forChild(ve)],o.f]});var Se=n("IV7Y"),Oe=n("R1ws");class je{}je.\u0275mod=c.cc({type:je}),je.\u0275inj=c.bc({factory:function(t){return new(t||je)},imports:[[o.f,h.c,S.r,O.a,j.b,M.e,f.b,U.a,L.a,L.a,Oe.b,g.b,I.c,E.b,D.b,A.l,W.e,B.d,S.i,we,Se.a,N.c]]});class Me{constructor(){}ngOnInit(){}}Me.\u0275fac=function(t){return new(t||Me)},Me.\u0275cmp=c.Yb({type:Me,selectors:[["app-error-page"]],decls:5,vars:0,consts:[[1,"center"],[1,"lobster","center"]],template:function(t,e){1&t&&(c.kc(0,"div"),c.kc(1,"mat-icon",0),c.Wc(2,"sentiment_dissatisfied"),c.jc(),c.kc(3,"h1",1),c.Wc(4,"Ce que vous recherchez n'existe pas ..."),c.jc(),c.jc())},directives:[f.a],styles:["div[_ngcontent-%COMP%]{margin-top:15%}h1[_ngcontent-%COMP%], mat-icon[_ngcontent-%COMP%]{color:#fff}mat-icon[_ngcontent-%COMP%]{font-size:50px;margin-bottom:25px}"]});class Ue{}Ue.\u0275mod=c.cc({type:Ue}),Ue.\u0275inj=c.bc({factory:function(t){return new(t||Ue)},imports:[[o.f.forChild([{path:"**",component:Me},{path:"error-page",component:Me}]),f.b],o.f]});var Le=n("tk/3"),Ie=n("JIr8");class De{constructor(t){this.authService=t}intercept(t,e){return t=t.clone({setHeaders:{Authorization:this.authService.getToken()?this.authService.getToken():i.a.anonymousHeader}}),e.handle(t).pipe(Object(Ie.a)(t=>{throw t.status&&401===t.status&&(t.error="Votre session est termin\xe9e",this.authService.logout()),t}),Object(H.a)(t=>t))}}De.\u0275fac=function(t){return new(t||De)(c.oc(l.a))},De.\u0275prov=c.ac({token:De,factory:De.\u0275fac});var Ae=n("kgAt");class We{}We.\u0275mod=c.cc({type:We}),We.\u0275inj=c.bc({factory:function(t){return new(t||We)},providers:[ye.a,Ae.a,{provide:Le.a,useClass:De,multi:!0}]});var Be=n("2PTZ");class $e{}$e.\u0275mod=c.cc({type:$e,bootstrap:[w]}),$e.\u0275inj=c.bc({factory:function(t){return new(t||$e)},imports:[[h.c,a.a,s,g.b,f.b,p.b,d.b,Le.c,S.i,S.r,je,Be.FormulaireModules,Ue,We]]}),i.a.production&&Object(c.kb)(),a.d().bootstrapModule($e).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0,6]]]);
//# sourceMappingURL=main.js.map